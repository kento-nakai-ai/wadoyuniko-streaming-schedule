# ã€ç‰¹å…¸ã€‘n8nãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³å®Œå…¨é›†
## å³æˆ¦åŠ›ï¼ã‚³ãƒ”ãƒšã§ä½¿ãˆã‚‹å®Ÿè·µçš„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ70é¸

---

## ğŸ¯ ã“ã®ã‚¬ã‚¤ãƒ‰ã®ä¾¡å€¤

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆæ™‚é–“ã®åŠ‡çš„çŸ­ç¸®

**Beforeï¼ˆã‚¼ãƒ­ã‹ã‚‰è¨­è¨ˆï¼‰**
```bash
è¦ä»¶åˆ†æ: 2æ™‚é–“
è¨­è¨ˆæ¤œè¨: 4æ™‚é–“
å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ: 8æ™‚é–“
ãƒ‡ãƒãƒƒã‚°ãƒ»æœ€é©åŒ–: 6æ™‚é–“
åˆè¨ˆ: 20æ™‚é–“ã®é–‹ç™ºæ™‚é–“
```

**Afterï¼ˆãƒ‘ã‚¿ãƒ¼ãƒ³æ´»ç”¨ï¼‰**
```bash
ãƒ‘ã‚¿ãƒ¼ãƒ³é¸æŠ: 5åˆ†
ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º: 30åˆ†
ãƒ†ã‚¹ãƒˆãƒ»èª¿æ•´: 15åˆ†
åˆè¨ˆ: 50åˆ†ã§å®Œæˆ
```

**é–‹ç™ºåŠ¹ç‡å‘ä¸Š: 2,400%ï¼æ™‚çŸ­åŠ¹æœ: 19.2æ™‚é–“**

### 70ã®å®Ÿè·µãƒ‘ã‚¿ãƒ¼ãƒ³

```mermaid
graph TB
    subgraph "ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³"
        A1[CSVå‡¦ç†è‡ªå‹•åŒ–]
        A2[APIçµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³]
        A3[ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŒæœŸ]
        A4[ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›å‡¦ç†]
    end

    subgraph "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³"
        B1[Slackè‡ªå‹•é€šçŸ¥]
        B2[ãƒ¡ãƒ¼ãƒ«ä¸€æ–‰é…ä¿¡]
        B3[Teamsé€£æº]
        B4[é¡§å®¢è‡ªå‹•å¿œç­”]
    end

    subgraph "ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³"
        C1[æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼]
        C2[è«‹æ±‚æ›¸å‡¦ç†]
        C3[åœ¨åº«ç®¡ç†è‡ªå‹•åŒ–]
        C4[ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ]
    end

    subgraph "ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³"
        D1[ãƒªãƒ¼ãƒ‰ç®¡ç†]
        D2[SNSæŠ•ç¨¿è‡ªå‹•åŒ–]
        D3[ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³å®Ÿè¡Œ]
        D4[åˆ†æãƒ»è¿½è·¡]
    end
```

---

## ğŸ“‚ ç›®æ¬¡

1. [ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ18é¸ï¼‰](#ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³)
2. [ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ15é¸ï¼‰](#ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³)
3. [ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ20é¸ï¼‰](#ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³)
4. [ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è‡ªå‹•åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ12é¸ï¼‰](#ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è‡ªå‹•åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³)
5. [ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ5é¸ï¼‰](#ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³)

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ18é¸ï¼‰

### Pattern 1: CSVè‡ªå‹•å‡¦ç†ãƒ»å¤‰æ›ã‚·ã‚¹ãƒ†ãƒ 

```json
{
  "name": "CSVè‡ªå‹•å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ",
  "description": "CSVãƒ•ã‚¡ã‚¤ãƒ«ã®å–å¾—â†’å¤‰æ›â†’é…ä¿¡ã‚’å®Œå…¨è‡ªå‹•åŒ–",
  "complexity": "åˆç´š",
  "estimated_time": "30åˆ†",
  
  "workflow": {
    "trigger": {
      "type": "Schedule Trigger",
      "cron": "0 9 * * 1-5",
      "name": "å¹³æ—¥æœ9æ™‚å®Ÿè¡Œ"
    },
    
    "nodes": [
      {
        "type": "HTTP Request",
        "name": "CSVå–å¾—",
        "parameters": {
          "url": "https://api.example.com/export/daily.csv",
          "method": "GET",
          "headers": {
            "Authorization": "Bearer {{$env.API_TOKEN}}"
          },
          "options": {
            "response": {
              "format": "file"
            }
          }
        }
      },
      
      {
        "type": "Spreadsheet File",
        "name": "CSVè§£æ",
        "parameters": {
          "operation": "read",
          "options": {
            "headerRow": 1,
            "includeEmptyRows": false
          }
        }
      },
      
      {
        "type": "Code",
        "name": "ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»æ¤œè¨¼",
        "parameters": {
          "jsCode": `
            // ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ãƒ»å¤‰æ›å‡¦ç†
            const processData = (items) => {
              return items.map(item => {
                // å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯
                if (!item.email || !item.name) {
                  throw new Error(\`å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸è¶³: \${JSON.stringify(item)}\`);
                }
                
                // ãƒ‡ãƒ¼ã‚¿æ­£è¦åŒ–
                return {
                  id: item.id || generateId(),
                  name: item.name.trim(),
                  email: item.email.toLowerCase().trim(),
                  phone: formatPhoneNumber(item.phone || ''),
                  created_date: item.created_date || new Date().toISOString(),
                  category: categorizeCustomer(item),
                  score: calculateScore(item),
                  processed_at: new Date().toISOString()
                };
              });
            };
            
            const generateId = () => Date.now().toString(36) + Math.random().toString(36).substr(2);
            
            const formatPhoneNumber = (phone) => {
              return phone.replace(/[^0-9]/g, '').replace(/(\d{3})(\d{4})(\d{4})/, '$1-$2-$3');
            };
            
            const categorizeCustomer = (item) => {
              const amount = parseFloat(item.total_amount) || 0;
              if (amount > 1000000) return 'Premium';
              if (amount > 100000) return 'Gold';
              if (amount > 10000) return 'Silver';
              return 'Bronze';
            };
            
            const calculateScore = (item) => {
              let score = 0;
              score += (parseFloat(item.total_amount) || 0) / 10000;
              score += (parseInt(item.order_count) || 0) * 5;
              score += item.email.includes('gmail') ? 10 : 15; // ä¼æ¥­ãƒ¡ãƒ¼ãƒ«å„ªé‡
              return Math.round(Math.min(score, 100));
            };
            
            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµ±è¨ˆ
            const stats = {
              total_records: $input.all().length,
              processed_records: 0,
              errors: []
            };
            
            try {
              const processedData = processData($input.all());
              stats.processed_records = processedData.length;
              
              return [{
                data: processedData,
                processing_stats: stats,
                summary: {
                  categories: processedData.reduce((acc, item) => {
                    acc[item.category] = (acc[item.category] || 0) + 1;
                    return acc;
                  }, {}),
                  avg_score: processedData.reduce((sum, item) => sum + item.score, 0) / processedData.length
                }
              }];
            } catch (error) {
              stats.errors.push(error.message);
              throw new Error(\`ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚¨ãƒ©ãƒ¼: \${error.message}\`);
            }
          `
        }
      },
      
      {
        "type": "Split In Batches",
        "name": "ãƒãƒƒãƒåˆ†å‰²",
        "parameters": {
          "batchSize": 100,
          "options": {
            "reset": false
          }
        }
      },
      
      {
        "type": "HTTP Request", 
        "name": "CRMæ›´æ–°",
        "parameters": {
          "url": "https://crm.example.com/api/v1/contacts/batch",
          "method": "POST",
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer {{$env.CRM_TOKEN}}"
          },
          "body": {
            "contacts": "={{$json.data}}",
            "options": {
              "upsert": true,
              "notify": false
            }
          }
        }
      }
    ]
  },
  
  "customization_points": [
    "CSVå–å¾—å…ˆURLãƒ»èªè¨¼æ–¹æ³•",
    "ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯", 
    "ã‚«ãƒ†ã‚´ãƒªåˆ†é¡ãƒ«ãƒ¼ãƒ«",
    "ã‚¹ã‚³ã‚¢è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ",
    "é€ä¿¡å…ˆã‚·ã‚¹ãƒ†ãƒ "
  ],
  
  "monitoring": {
    "success_metrics": ["processed_records", "avg_processing_time"],
    "error_handling": "retry_3_times_then_alert",
    "notification": "slack_on_completion"
  }
}
```

### Pattern 2: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ APIç›£è¦–ãƒ»åŒæœŸã‚·ã‚¹ãƒ†ãƒ 

```json
{
  "name": "APIãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–åŒæœŸ",
  "description": "è¤‡æ•°APIã®å¤‰æ›´ã‚’ç›£è¦–ã—ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ‡ãƒ¼ã‚¿åŒæœŸ",
  "complexity": "ä¸­ç´š",
  "estimated_time": "1æ™‚é–“",
  
  "workflow": {
    "trigger": {
      "type": "Webhook",
      "name": "APIå¤‰æ›´é€šçŸ¥å—ä¿¡",
      "path": "/api-change-notification",
      "httpMethod": "POST"
    },
    
    "nodes": [
      {
        "type": "Code",
        "name": "å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆè§£æ",
        "parameters": {
          "jsCode": `
            const event = $input.first().json;
            
            // ã‚¤ãƒ™ãƒ³ãƒˆåˆ†é¡ãƒ»å„ªå…ˆåº¦åˆ¤å®š
            const analyzeEvent = (event) => {
              const eventTypes = {
                'customer.created': { priority: 'high', sync_targets: ['crm', 'email_marketing'] },
                'customer.updated': { priority: 'medium', sync_targets: ['crm'] },
                'order.completed': { priority: 'high', sync_targets: ['accounting', 'inventory', 'crm'] },
                'product.updated': { priority: 'low', sync_targets: ['catalog', 'website'] },
                'user.deleted': { priority: 'high', sync_targets: ['all_systems'] }
              };
              
              const config = eventTypes[event.type] || { 
                priority: 'low', 
                sync_targets: ['default'] 
              };
              
              return {
                ...event,
                classification: {
                  priority: config.priority,
                  sync_targets: config.sync_targets,
                  estimated_sync_time: calculateSyncTime(config.sync_targets),
                  requires_immediate_action: config.priority === 'high'
                },
                processing: {
                  received_at: new Date().toISOString(),
                  correlation_id: generateCorrelationId(),
                  source_system: event.source || 'unknown'
                }
              };
            };
            
            const calculateSyncTime = (targets) => {
              const baseTimes = {
                'crm': 30,
                'email_marketing': 15,
                'accounting': 60,
                'inventory': 45,
                'catalog': 20,
                'website': 120
              };
              
              return targets.reduce((total, target) => {
                return total + (baseTimes[target] || 30);
              }, 0);
            };
            
            const generateCorrelationId = () => {
              return 'sync_' + Date.now() + '_' + Math.random().toString(36).substr(2, 8);
            };
            
            return [analyzeEvent(event)];
          `
        }
      },
      
      {
        "type": "Switch",
        "name": "å„ªå…ˆåº¦åˆ¥ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°",
        "parameters": {
          "conditions": {
            "options": [
              {
                "conditions": {
                  "boolean": [
                    {
                      "value1": "={{$json.classification.priority}}",
                      "operation": "equal",
                      "value2": "high"
                    }
                  ]
                },
                "output": 0
              },
              {
                "conditions": {
                  "boolean": [
                    {
                      "value1": "={{$json.classification.priority}}",
                      "operation": "equal", 
                      "value2": "medium"
                    }
                  ]
                },
                "output": 1
              }
            ]
          },
          "fallbackOutput": 2
        }
      },
      
      {
        "type": "Code",
        "name": "é«˜å„ªå…ˆåº¦åŒæœŸå‡¦ç†",
        "parameters": {
          "jsCode": `
            const event = $input.first().json;
            const syncResults = [];
            
            // ä¸¦åˆ—åŒæœŸå®Ÿè¡Œ
            const executeHighPrioritySync = async (event) => {
              const promises = event.classification.sync_targets.map(async (target) => {
                try {
                  const result = await syncToTarget(target, event);
                  return { target, status: 'success', result };
                } catch (error) {
                  return { target, status: 'error', error: error.message };
                }
              });
              
              return await Promise.allSettled(promises);
            };
            
            const syncToTarget = async (target, event) => {
              const configs = {
                crm: {
                  url: process.env.CRM_API_URL + '/sync',
                  headers: { 'Authorization': 'Bearer ' + process.env.CRM_TOKEN }
                },
                email_marketing: {
                  url: process.env.EMAIL_API_URL + '/contacts/sync',
                  headers: { 'X-API-Key': process.env.EMAIL_API_KEY }
                },
                accounting: {
                  url: process.env.ACCOUNTING_API_URL + '/transactions/sync',
                  headers: { 'Authorization': 'Bearer ' + process.env.ACCOUNTING_TOKEN }
                }
              };
              
              const config = configs[target];
              if (!config) throw new Error(\`Unknown sync target: \${target}\`);
              
              // HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
              return {
                target: target,
                synced_at: new Date().toISOString(),
                records_affected: Math.floor(Math.random() * 100) + 1
              };
            };
            
            // åŒæœŸå®Ÿè¡Œ
            return [{
              ...event,
              sync_execution: {
                started_at: new Date().toISOString(),
                priority_level: 'high',
                expected_completion: new Date(Date.now() + 60000).toISOString()
              }
            }];
          `
        }
      }
    ]
  },
  
  "error_handling": {
    "retry_strategy": "exponential_backoff",
    "max_retries": 3,
    "dead_letter_queue": true,
    "notification_on_failure": true
  }
}
```

### Pattern 3: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å·®åˆ†åŒæœŸã‚·ã‚¹ãƒ†ãƒ 

```json
{
  "name": "DBå·®åˆ†åŒæœŸã‚·ã‚¹ãƒ†ãƒ ",
  "description": "è¤‡æ•°ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–“ã®å·®åˆ†ã‚’æ¤œå‡ºã—ã€è‡ªå‹•åŒæœŸ",
  "complexity": "ä¸Šç´š",
  "estimated_time": "2æ™‚é–“",
  
  "workflow": {
    "trigger": {
      "type": "Schedule Trigger",
      "cron": "0 */2 * * *",
      "name": "2æ™‚é–“æ¯å®Ÿè¡Œ"
    },
    
    "nodes": [
      {
        "type": "Postgres",
        "name": "ã‚½ãƒ¼ã‚¹DBæ¤œæŸ»",
        "parameters": {
          "operation": "executeQuery",
          "query": `
            SELECT 
              id,
              name,
              email,
              updated_at,
              MD5(CONCAT(name, email, status)) as record_hash
            FROM customers 
            WHERE updated_at > NOW() - INTERVAL '2 hours'
            ORDER BY updated_at DESC
          `,
          "options": {
            "queryRunner": "singleQuery"
          }
        }
      },
      
      {
        "type": "MySQL",
        "name": "ã‚¿ãƒ¼ã‚²ãƒƒãƒˆDBæ¤œæŸ»",
        "parameters": {
          "operation": "executeQuery", 
          "query": `
            SELECT 
              external_id as id,
              customer_name as name,
              email_address as email,
              last_modified as updated_at,
              MD5(CONCAT(customer_name, email_address, account_status)) as record_hash
            FROM customer_sync_table
            WHERE last_modified > DATE_SUB(NOW(), INTERVAL 2 HOUR)
          `
        }
      },
      
      {
        "type": "Code",
        "name": "å·®åˆ†æ¤œå‡ºãƒ»åŒæœŸãƒ—ãƒ©ãƒ³ä½œæˆ",
        "parameters": {
          "jsCode": `
            const sourceRecords = $input.first().json;
            const targetRecords = $input.last().json;
            
            // å·®åˆ†æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
            const detectChanges = (source, target) => {
              // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆï¼ˆé«˜é€Ÿæ¤œç´¢ç”¨ï¼‰
              const sourceIndex = new Map(source.map(r => [r.id, r]));
              const targetIndex = new Map(target.map(r => [r.id, r]));
              
              const changes = {
                created: [],    // æ–°è¦ä½œæˆ
                updated: [],    // æ›´æ–°
                deleted: [],    // å‰Šé™¤
                unchanged: []   // å¤‰æ›´ãªã—
              };
              
              // ã‚½ãƒ¼ã‚¹å´ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
              source.forEach(sourceRecord => {
                const targetRecord = targetIndex.get(sourceRecord.id);
                
                if (!targetRecord) {
                  // æ–°è¦ä½œæˆå¯¾è±¡
                  changes.created.push({
                    action: 'CREATE',
                    source_record: sourceRecord,
                    target_record: null,
                    priority: 'high'
                  });
                } else if (sourceRecord.record_hash !== targetRecord.record_hash) {
                  // æ›´æ–°å¯¾è±¡
                  changes.updated.push({
                    action: 'UPDATE',
                    source_record: sourceRecord,
                    target_record: targetRecord,
                    priority: 'medium',
                    changes_detected: detectFieldChanges(sourceRecord, targetRecord)
                  });
                } else {
                  // å¤‰æ›´ãªã—
                  changes.unchanged.push(sourceRecord.id);
                }
              });
              
              // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå´ã®ã¿ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ï¼ˆå‰Šé™¤å€™è£œï¼‰
              target.forEach(targetRecord => {
                if (!sourceIndex.has(targetRecord.id)) {
                  changes.deleted.push({
                    action: 'DELETE',
                    source_record: null,
                    target_record: targetRecord,
                    priority: 'low'
                  });
                }
              });
              
              return changes;
            };
            
            const detectFieldChanges = (source, target) => {
              const fieldMappings = {
                'name': 'customer_name',
                'email': 'email_address',
                'updated_at': 'last_modified'
              };
              
              const changes = [];
              Object.entries(fieldMappings).forEach(([sourceField, targetField]) => {
                if (source[sourceField] !== target[targetField]) {
                  changes.push({
                    field: sourceField,
                    old_value: target[targetField],
                    new_value: source[sourceField]
                  });
                }
              });
              
              return changes;
            };
            
            // åŒæœŸæˆ¦ç•¥æ±ºå®š
            const createSyncStrategy = (changes) => {
              const totalChanges = changes.created.length + changes.updated.length + changes.deleted.length;
              
              return {
                sync_mode: totalChanges > 100 ? 'batch' : 'individual',
                execution_order: ['created', 'updated', 'deleted'],
                batch_size: Math.min(50, Math.max(10, Math.floor(totalChanges / 5))),
                estimated_duration: totalChanges * 2, // 2ç§’/ãƒ¬ã‚³ãƒ¼ãƒ‰
                parallel_execution: totalChanges < 20
              };
            };
            
            const changes = detectChanges(sourceRecords, targetRecords);
            const strategy = createSyncStrategy(changes);
            
            return [{
              sync_analysis: {
                total_source_records: sourceRecords.length,
                total_target_records: targetRecords.length,
                changes_summary: {
                  created: changes.created.length,
                  updated: changes.updated.length,
                  deleted: changes.deleted.length,
                  unchanged: changes.unchanged.length
                }
              },
              changes: changes,
              sync_strategy: strategy,
              analysis_timestamp: new Date().toISOString()
            }];
          `
        }
      }
    ]
  }
}
```

---

## ğŸ’¬ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ15é¸ï¼‰

### Pattern 4: ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆSlacké€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

```json
{
  "name": "AIé§†å‹•Slacké€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ",
  "description": "çŠ¶æ³ã«å¿œã˜ã¦æœ€é©åŒ–ã•ã‚ŒãŸSlacké€šçŸ¥ã‚’è‡ªå‹•é…ä¿¡",
  "complexity": "ä¸­ç´š",
  "estimated_time": "45åˆ†",
  
  "workflow": {
    "trigger": {
      "type": "Webhook",
      "name": "ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡",
      "path": "/notification-trigger"
    },
    
    "nodes": [
      {
        "type": "Code",
        "name": "é€šçŸ¥å†…å®¹ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆåˆ†æ",
        "parameters": {
          "jsCode": `
            const event = $input.first().json;
            
            // é€šçŸ¥ã®é‡è¦åº¦ã¨ã‚«ãƒ†ã‚´ãƒªã‚’ AI ã§åˆ†æ
            const analyzeNotification = (event) => {
              // ç·Šæ€¥åº¦åˆ¤å®š
              const urgencyKeywords = {
                critical: ['ã‚¨ãƒ©ãƒ¼', 'ãƒ€ã‚¦ãƒ³', 'åœæ­¢', 'å¤±æ•—', 'critical', 'error', 'down'],
                high: ['è­¦å‘Š', 'é…å»¶', 'ç•°å¸¸', 'è¦ç¢ºèª', 'warning', 'delay', 'issue'],
                medium: ['å®Œäº†', 'é–‹å§‹', 'æ›´æ–°', 'completed', 'started', 'updated'],
                low: ['æƒ…å ±', 'info', 'é€šçŸ¥', 'notification']
              };
              
              let urgency = 'low';
              const message = (event.message || '').toLowerCase();
              
              for (const [level, keywords] of Object.entries(urgencyKeywords)) {
                if (keywords.some(keyword => message.includes(keyword))) {
                  urgency = level;
                  break;
                }
              }
              
              // ã‚«ãƒ†ã‚´ãƒªåˆ†é¡
              const categories = {
                system: ['ã‚·ã‚¹ãƒ†ãƒ ', 'ã‚µãƒ¼ãƒãƒ¼', 'API', 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹'],
                business: ['å£²ä¸Š', 'é¡§å®¢', 'æ³¨æ–‡', 'business', 'sales'],
                development: ['ãƒ‡ãƒ—ãƒ­ã‚¤', 'ãƒ“ãƒ«ãƒ‰', 'ãƒ†ã‚¹ãƒˆ', 'PR', 'ã‚³ãƒŸãƒƒãƒˆ'],
                marketing: ['ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³', 'åºƒå‘Š', 'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°', 'campaign']
              };
              
              let category = 'general';
              for (const [cat, keywords] of Object.entries(categories)) {
                if (keywords.some(keyword => message.includes(keyword))) {
                  category = cat;
                  break;
                }
              }
              
              // å¯¾è±¡ãƒãƒ£ãƒ³ãƒãƒ«æ±ºå®š
              const channelMapping = {
                critical: ['#alerts', '#on-call', '#management'],
                high: ['#alerts', '#team-' + category],
                medium: ['#team-' + category, '#general'],
                low: ['#general', '#notifications']
              };
              
              // é€šçŸ¥ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆå–¶æ¥­æ™‚é–“è€ƒæ…®ï¼‰
              const now = new Date();
              const hour = now.getHours();
              const isBusinessHour = hour >= 9 && hour <= 18;
              const isWeekend = [0, 6].includes(now.getDay());
              
              const notificationTiming = {
                immediate: urgency === 'critical',
                delay_5min: urgency === 'high' && !isBusinessHour,
                delay_1hour: urgency === 'medium' && isWeekend,
                delay_next_day: urgency === 'low' && isWeekend
              };
              
              return {
                ...event,
                analysis: {
                  urgency: urgency,
                  category: category,
                  target_channels: channelMapping[urgency] || ['#general'],
                  notification_timing: notificationTiming,
                  business_context: {
                    is_business_hour: isBusinessHour,
                    is_weekend: isWeekend,
                    local_time: now.toLocaleString('ja-JP')
                  }
                }
              };
            };
            
            return [analyzeNotification(event)];
          `
        }
      },
      
      {
        "type": "OpenAI",
        "name": "é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ€é©åŒ–",
        "parameters": {
          "model": "gpt-4",
          "systemPrompt": `
            ã‚ãªãŸã¯Slacké€šçŸ¥ã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã§ã™ã€‚
            
            ä¸ãˆã‚‰ã‚ŒãŸæƒ…å ±ã‚’åŸºã«ã€åŠ¹æœçš„ãªSlacké€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
            
            è¦ä»¶ï¼š
            - ç·Šæ€¥åº¦ã«å¿œã˜ãŸé©åˆ‡ãªçµµæ–‡å­—ä½¿ç”¨
            - ç°¡æ½”ã§åˆ†ã‹ã‚Šã‚„ã™ã„å†…å®¹
            - å¿…è¦ãªå ´åˆã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ æç¤º
            - ã‚¹ãƒ¬ãƒƒãƒ‰å½¢å¼ã®è©³ç´°æƒ…å ±æ§‹æˆ
            
            å‡ºåŠ›å½¢å¼ï¼š
            {
              "main_message": "ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
              "thread_details": "ã‚¹ãƒ¬ãƒƒãƒ‰ã®è©³ç´°æƒ…å ±",
              "suggested_reactions": ["çµµæ–‡å­—1", "çµµæ–‡å­—2"],
              "action_buttons": [
                {
                  "text": "ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ",
                  "action": "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³",
                  "style": "primary|danger"
                }
              ]
            }
          `,
          "userPrompt": `
            é€šçŸ¥å†…å®¹: {{$json.message}}
            ç·Šæ€¥åº¦: {{$json.analysis.urgency}}
            ã‚«ãƒ†ã‚´ãƒª: {{$json.analysis.category}}
            æ™‚åˆ»: {{$json.analysis.business_context.local_time}}
            å–¶æ¥­æ™‚é–“: {{$json.analysis.business_context.is_business_hour}}
          `
        }
      },
      
      {
        "type": "Switch",
        "name": "ç·Šæ€¥åº¦åˆ¥é…ä¿¡ãƒ«ãƒ¼ãƒˆ",
        "parameters": {
          "conditions": {
            "options": [
              {
                "conditions": {
                  "boolean": [
                    {
                      "value1": "={{$json.analysis.urgency}}",
                      "operation": "equal",
                      "value2": "critical"
                    }
                  ]
                },
                "output": 0
              }
            ]
          }
        }
      },
      
      {
        "type": "Slack",
        "name": "ç·Šæ€¥é€šçŸ¥é…ä¿¡",
        "parameters": {
          "operation": "postMessage",
          "channel": "#alerts",
          "text": "ğŸš¨ **ç·Šæ€¥é€šçŸ¥** ğŸš¨\n\n{{$json.main_message}}",
          "otherOptions": {
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "{{$json.main_message}}"
                }
              },
              {
                "type": "actions",
                "elements": [
                  {
                    "type": "button",
                    "text": {
                      "type": "plain_text",
                      "text": "è©³ç´°ç¢ºèª"
                    },
                    "style": "danger",
                    "action_id": "view_details"
                  },
                  {
                    "type": "button", 
                    "text": {
                      "type": "plain_text",
                      "text": "å¯¾å¿œé–‹å§‹"
                    },
                    "style": "primary",
                    "action_id": "start_response"
                  }
                ]
              }
            ]
          }
        }
      },
      
      {
        "type": "Code",
        "name": "é…ä¿¡çµæœé›†è¨ˆ",
        "parameters": {
          "jsCode": `
            const results = $input.all();
            
            const summary = {
              total_notifications: results.length,
              successful_deliveries: results.filter(r => r.json && r.json.ok).length,
              failed_deliveries: results.filter(r => !r.json || !r.json.ok).length,
              channels_notified: [...new Set(results.map(r => r.json?.channel).filter(Boolean))],
              delivery_timestamp: new Date().toISOString(),
              performance_metrics: {
                total_processing_time: performance.now() - $execution.startTime,
                avg_delivery_time: results.reduce((sum, r) => sum + (r.responseTime || 0), 0) / results.length
              }
            };
            
            return [summary];
          `
        }
      }
    ]
  },
  
  "customization_guide": {
    "urgency_keywords": "ç·Šæ€¥åº¦åˆ¤å®šã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®èª¿æ•´",
    "channel_mapping": "ãƒãƒ£ãƒ³ãƒãƒ«å‰²ã‚Šå½“ã¦ãƒ«ãƒ¼ãƒ«ã®å¤‰æ›´",
    "business_hours": "å–¶æ¥­æ™‚é–“ãƒ»ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®è¨­å®š",
    "ai_prompts": "AIé€šçŸ¥æ–‡ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º"
  }
}
```

### Pattern 5: ãƒ¡ãƒ¼ãƒ«è‡ªå‹•é…ä¿¡ãƒ»ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

```json
{
  "name": "AI ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºãƒ‰ãƒ¡ãƒ¼ãƒ«é…ä¿¡",
  "description": "é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ãŸé«˜åº¦ã«ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸãƒ¡ãƒ¼ãƒ«è‡ªå‹•é…ä¿¡",
  "complexity": "ä¸Šç´š",
  "estimated_time": "1.5æ™‚é–“",
  
  "workflow": {
    "trigger": {
      "type": "Schedule Trigger", 
      "cron": "0 10 * * 2,4",
      "name": "ç«ãƒ»æœ¨æ›œ10æ™‚é…ä¿¡"
    },
    
    "nodes": [
      {
        "type": "HTTP Request",
        "name": "é¡§å®¢ãƒ‡ãƒ¼ã‚¿å–å¾—",
        "parameters": {
          "url": "{{$env.CRM_API_URL}}/customers/active",
          "method": "GET",
          "headers": {
            "Authorization": "Bearer {{$env.CRM_TOKEN}}"
          },
          "qs": {
            "limit": 1000,
            "include": "preferences,purchase_history,engagement_metrics",
            "last_email_sent": ">7days_ago"
          }
        }
      },
      
      {
        "type": "Code",
        "name": "é¡§å®¢ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³",
        "parameters": {
          "jsCode": `
            const customers = $input.first().json.data;
            
            // é«˜åº¦ãªé¡§å®¢ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
            const segmentCustomers = (customers) => {
              return customers.map(customer => {
                const segments = [];
                const metrics = customer.engagement_metrics || {};
                const purchases = customer.purchase_history || [];
                
                // è³¼è²·è¡Œå‹•ãƒ™ãƒ¼ã‚¹ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
                const totalSpent = purchases.reduce((sum, p) => sum + (p.amount || 0), 0);
                const avgOrderValue = purchases.length > 0 ? totalSpent / purchases.length : 0;
                const lastPurchase = purchases.length > 0 ? new Date(purchases[purchases.length - 1].date) : null;
                const daysSinceLastPurchase = lastPurchase ? (Date.now() - lastPurchase.getTime()) / (1000 * 60 * 60 * 24) : 999;
                
                // VIPé¡§å®¢
                if (totalSpent > 100000) segments.push('VIP');
                
                // é«˜é »åº¦è³¼å…¥é¡§å®¢  
                if (purchases.length > 10 && avgOrderValue > 5000) segments.push('HighFrequency');
                
                // ä¼‘çœ é¡§å®¢
                if (daysSinceLastPurchase > 60) segments.push('Dormant');
                
                // æ–°è¦é¡§å®¢
                if (purchases.length <= 2 && daysSinceLastPurchase <= 30) segments.push('NewCustomer');
                
                // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹
                const emailOpenRate = metrics.email_open_rate || 0;
                if (emailOpenRate > 0.5) segments.push('HighEngagement');
                else if (emailOpenRate < 0.1) segments.push('LowEngagement');
                
                // æ¨å¥¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—
                const contentPreference = determineContentPreference(customer, segments);
                
                return {
                  ...customer,
                  segments: segments,
                  content_preference: contentPreference,
                  personalization_data: {
                    total_spent: totalSpent,
                    avg_order_value: avgOrderValue,
                    days_since_last_purchase: Math.floor(daysSinceLastPurchase),
                    predicted_interest: predictInterest(customer, purchases)
                  }
                };
              });
            };
            
            const determineContentPreference = (customer, segments) => {
              if (segments.includes('VIP')) return 'premium_exclusive';
              if (segments.includes('Dormant')) return 'win_back_offer';
              if (segments.includes('NewCustomer')) return 'onboarding_guide';
              if (segments.includes('HighEngagement')) return 'detailed_insights';
              return 'general_newsletter';
            };
            
            const predictInterest = (customer, purchases) => {
              const categories = purchases.reduce((acc, p) => {
                const cat = p.category || 'other';
                acc[cat] = (acc[cat] || 0) + 1;
                return acc;
              }, {});
              
              const topCategory = Object.keys(categories).reduce((a, b) => 
                categories[a] > categories[b] ? a : b, 'general');
              
              return {
                primary_category: topCategory,
                purchase_patterns: categories,
                seasonal_preference: detectSeasonality(purchases)
              };
            };
            
            const detectSeasonality = (purchases) => {
              const monthlyPurchases = purchases.reduce((acc, p) => {
                const month = new Date(p.date).getMonth();
                acc[month] = (acc[month] || 0) + 1;
                return acc;
              }, {});
              
              const maxMonth = Object.keys(monthlyPurchases).reduce((a, b) => 
                monthlyPurchases[a] > monthlyPurchases[b] ? a : b, 0);
              
              const seasons = ['å†¬', 'å†¬', 'æ˜¥', 'æ˜¥', 'æ˜¥', 'å¤', 'å¤', 'å¤', 'ç§‹', 'ç§‹', 'ç§‹', 'å†¬'];
              return seasons[maxMonth];
            };
            
            const segmentedCustomers = segmentCustomers(customers);
            
            return [{
              customers: segmentedCustomers,
              segmentation_summary: {
                total_customers: customers.length,
                segments_distribution: segmentedCustomers.reduce((acc, c) => {
                  c.segments.forEach(seg => {
                    acc[seg] = (acc[seg] || 0) + 1;
                  });
                  return acc;
                }, {}),
                processed_at: new Date().toISOString()
              }
            }];
          `
        }
      },
      
      {
        "type": "Split In Batches",
        "name": "ãƒãƒƒãƒåˆ†å‰²ï¼ˆ50äººãšã¤ï¼‰",
        "parameters": {
          "batchSize": 50,
          "options": {
            "reset": false
          }
        }
      },
      
      {
        "type": "OpenAI",
        "name": "ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºãƒ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ",
        "parameters": {
          "model": "gpt-4",
          "temperature": 0.7,
          "systemPrompt": `
            ã‚ãªãŸã¯å„ªç§€ãªãƒ¡ãƒ¼ãƒ«ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°å°‚é–€å®¶ã§ã™ã€‚
            
            é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦ã€é«˜åº¦ã«ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸãƒ¡ãƒ¼ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
            
            è¦ä»¶ï¼š
            - é¡§å®¢ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã«å¿œã˜ãŸé©åˆ‡ãªãƒˆãƒ¼ãƒ³ã¨å†…å®¹
            - å…·ä½“çš„ãªè³¼è²·ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã—ãŸææ¡ˆ
            - è‡ªç„¶ã§è¦ªã—ã¿ã‚„ã™ã„æ–‡ä½“
            - æ˜ç¢ºãªCTAï¼ˆCall to Actionï¼‰
            
            å‡ºåŠ›å½¢å¼ï¼š
            {
              "subject_line": "ä»¶å",
              "preheader": "ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆ",
              "greeting": "æŒ¨æ‹¶æ–‡",
              "main_content": "ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„",
              "product_recommendations": [
                {
                  "product_name": "å•†å“å",
                  "reason": "æ¨è–¦ç†ç”±",
                  "special_offer": "ç‰¹å…¸"
                }
              ],
              "cta_primary": "ãƒ¡ã‚¤ãƒ³CTA",
              "cta_secondary": "ã‚µãƒ–CTA",
              "closing": "ç· ã‚ã®æ–‡ç« ",
              "personalization_tokens": {
                "name": "é¡§å®¢å",
                "last_purchase": "æœ€çµ‚è³¼å…¥å•†å“",
                "total_savings": "ç´¯è¨ˆç¯€ç´„é¡"
              }
            }
          `,
          "userPrompt": `
            ä»¥ä¸‹ã®é¡§å®¢æƒ…å ±ã§ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºãƒ‰ãƒ¡ãƒ¼ãƒ«ã‚’ä½œæˆï¼š
            
            é¡§å®¢å: {{$json.name}}
            ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ: {{$json.segments}}
            ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¨­å®š: {{$json.content_preference}}  
            è³¼è²·å±¥æ­´: {{JSON.stringify($json.purchase_history)}}
            ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³: {{JSON.stringify($json.personalization_data)}}
            
            ä»Šæœˆã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³: æ˜¥ã®æ–°å•†å“20%ã‚ªãƒ•
            ç‰¹åˆ¥ã‚ªãƒ•ã‚¡ãƒ¼: VIPé¡§å®¢é™å®š30%ã‚ªãƒ•ï¼ˆè©²å½“é¡§å®¢ã®ã¿ï¼‰
          `
        }
      },
      
      {
        "type": "Gmail",
        "name": "ãƒ¡ãƒ¼ãƒ«é…ä¿¡",
        "parameters": {
          "operation": "send",
          "toList": "{{$json.email}}",
          "subject": "{{$json.subject_line}}",
          "message": `
            <html>
              <head>
                <style>
                  .email-container { max-width: 600px; margin: 0 auto; font-family: Arial, sans-serif; }
                  .header { background: #f8f9fa; padding: 20px; text-align: center; }
                  .content { padding: 30px 20px; }
                  .product-rec { border: 1px solid #e9ecef; margin: 15px 0; padding: 15px; border-radius: 8px; }
                  .cta-primary { background: #007bff; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block; margin: 20px 0; }
                  .footer { background: #f8f9fa; padding: 20px; font-size: 12px; color: #6c757d; }
                </style>
              </head>
              <body>
                <div class="email-container">
                  <div class="header">
                    <h1>{{$json.greeting}}</h1>
                  </div>
                  
                  <div class="content">
                    <p>{{$json.main_content}}</p>
                    
                    <div class="recommendations">
                      <h3>ã‚ãªãŸã«ãŠã™ã™ã‚</h3>
                      {{#each product_recommendations}}
                      <div class="product-rec">
                        <h4>{{this.product_name}}</h4>
                        <p>{{this.reason}}</p>
                        <p><strong>{{this.special_offer}}</strong></p>
                      </div>
                      {{/each}}
                    </div>
                    
                    <div style="text-align: center;">
                      <a href="#" class="cta-primary">{{$json.cta_primary}}</a>
                    </div>
                    
                    <p>{{$json.closing}}</p>
                  </div>
                  
                  <div class="footer">
                    <p>é…ä¿¡åœæ­¢ã‚„è¨­å®šå¤‰æ›´ã¯<a href="#">ã“ã¡ã‚‰</a></p>
                  </div>
                </div>
              </body>
            </html>
          `,
          "options": {
            "ccList": "",
            "bccList": "analytics@company.com"
          }
        }
      }
    ]
  }
}
```

---

## ğŸ“‹ ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ20é¸ï¼‰

### Pattern 6: å¤šæ®µéšæ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 

```json
{
  "name": "ã‚¹ãƒãƒ¼ãƒˆå¤šæ®µéšæ‰¿èªã‚·ã‚¹ãƒ†ãƒ ",
  "description": "é‡‘é¡ãƒ»éƒ¨é–€ãƒ»ãƒªã‚¹ã‚¯ã«åŸºã¥ãå‹•çš„æ‰¿èªãƒ•ãƒ­ãƒ¼",
  "complexity": "ä¸Šç´š",
  "estimated_time": "2æ™‚é–“",
  
  "workflow": {
    "trigger": {
      "type": "Webhook",
      "name": "æ‰¿èªä¾é ¼å—ä¿¡",
      "path": "/approval-request",
      "httpMethod": "POST"
    },
    
    "nodes": [
      {
        "type": "Code",
        "name": "æ‰¿èªãƒ•ãƒ­ãƒ¼å‹•çš„ç”Ÿæˆ",
        "parameters": {
          "jsCode": `
            const request = $input.first().json;
            
            // æ‰¿èªãƒãƒˆãƒªã‚¯ã‚¹ï¼ˆéƒ¨é–€ãƒ»é‡‘é¡ãƒ»ãƒªã‚¹ã‚¯åˆ¥ï¼‰
            const generateApprovalFlow = (request) => {
              const rules = {
                expense: {
                  thresholds: [
                    { max: 10000, approvers: ['direct_manager'], timeline: 24 },
                    { max: 100000, approvers: ['direct_manager', 'department_head'], timeline: 48 },
                    { max: 1000000, approvers: ['direct_manager', 'department_head', 'cfo'], timeline: 72 },
                    { max: Infinity, approvers: ['direct_manager', 'department_head', 'cfo', 'ceo'], timeline: 96 }
                  ]
                },
                contract: {
                  thresholds: [
                    { max: 100000, approvers: ['legal_counsel', 'department_head'], timeline: 48 },
                    { max: 1000000, approvers: ['legal_counsel', 'cfo', 'department_head'], timeline: 96 },
                    { max: Infinity, approvers: ['legal_counsel', 'cfo', 'ceo'], timeline: 168 }
                  ]
                },
                hiring: {
                  thresholds: [
                    { max: 1, approvers: ['hiring_manager', 'hr_manager'], timeline: 72 },
                    { max: 5, approvers: ['hiring_manager', 'hr_manager', 'department_head'], timeline: 120 },
                    { max: Infinity, approvers: ['hiring_manager', 'hr_manager', 'department_head', 'ceo'], timeline: 168 }
                  ]
                }
              };
              
              const category = request.category || 'expense';
              const amount = parseFloat(request.amount) || 0;
              const ruleSet = rules[category] || rules.expense;
              
              // ãƒªã‚¹ã‚¯ä¿‚æ•°è¨ˆç®—
              const riskMultiplier = calculateRiskMultiplier(request);
              const adjustedAmount = amount * riskMultiplier;
              
              // é©åˆ‡ãªé–¾å€¤é¸æŠ
              const threshold = ruleSet.thresholds.find(t => adjustedAmount <= t.max);
              
              // æ‰¿èªãƒã‚§ãƒ¼ãƒ³æ§‹ç¯‰
              const approvalChain = threshold.approvers.map((approver, index) => ({
                step: index + 1,
                approver_role: approver,
                approver_details: getApproverDetails(approver, request.department),
                status: 'pending',
                required: true,
                parallel: index > 0 && threshold.approvers.length > 3, // 3æ®µéšä»¥ä¸Šã¯ä¸€éƒ¨ä¸¦åˆ—
                deadline: new Date(Date.now() + threshold.timeline * 60 * 60 * 1000).toISOString(),
                escalation_hours: calculateEscalationHours(approver),
                delegation_allowed: isDelegationAllowed(approver, adjustedAmount)
              }));
              
              return {
                ...request,
                approval_metadata: {
                  flow_id: generateFlowId(),
                  category: category,
                  original_amount: amount,
                  risk_multiplier: riskMultiplier,
                  adjusted_amount: adjustedAmount,
                  approval_chain: approvalChain,
                  total_steps: approvalChain.length,
                  estimated_completion_time: threshold.timeline,
                  created_at: new Date().toISOString(),
                  priority: calculatePriority(request, riskMultiplier)
                }
              };
            };
            
            const calculateRiskMultiplier = (request) => {
              let multiplier = 1.0;
              
              // æ–°è¦ãƒ™ãƒ³ãƒ€ãƒ¼ãƒªã‚¹ã‚¯
              if (request.vendor_type === 'new') multiplier *= 1.5;
              
              // æµ·å¤–å–å¼•ãƒªã‚¹ã‚¯
              if (request.international === true) multiplier *= 1.3;
              
              // ç·Šæ€¥åº¦ãƒªã‚¹ã‚¯
              if (request.urgency === 'high') multiplier *= 1.2;
              
              // éå»ã®å•é¡Œå±¥æ­´
              if (request.requester_risk_score > 0.7) multiplier *= 1.4;
              
              return multiplier;
            };
            
            const getApproverDetails = (role, department) => {
              const approvers = {
                direct_manager: { email: \`manager@\${department}.company.com\`, name: \`\${department} Manager\` },
                department_head: { email: \`head@\${department}.company.com\`, name: \`Head of \${department}\` },
                hr_manager: { email: 'hr@company.com', name: 'HR Manager' },
                legal_counsel: { email: 'legal@company.com', name: 'Legal Counsel' },
                cfo: { email: 'cfo@company.com', name: 'Chief Financial Officer' },
                ceo: { email: 'ceo@company.com', name: 'Chief Executive Officer' }
              };
              return approvers[role] || { email: 'admin@company.com', name: 'Administrator' };
            };
            
            const calculateEscalationHours = (approver) => {
              const escalationTimes = {
                direct_manager: 24,
                department_head: 48,
                hr_manager: 48,
                legal_counsel: 72,
                cfo: 96,
                ceo: 120
              };
              return escalationTimes[approver] || 48;
            };
            
            const isDelegationAllowed = (approver, amount) => {
              const delegationLimits = {
                direct_manager: 50000,
                department_head: 200000,
                hr_manager: 100000,
                legal_counsel: 500000
              };
              return amount <= (delegationLimits[approver] || 0);
            };
            
            const calculatePriority = (request, riskMultiplier) => {
              const amount = parseFloat(request.amount) || 0;
              
              if (amount > 1000000 || riskMultiplier > 2.0) return 'critical';
              if (amount > 100000 || riskMultiplier > 1.5) return 'high';
              if (amount > 10000 || riskMultiplier > 1.2) return 'medium';
              return 'low';
            };
            
            const generateFlowId = () => {
              return 'approval_' + Date.now().toString(36) + '_' + Math.random().toString(36).substr(2, 8);
            };
            
            return [generateApprovalFlow(request)];
          `
        }
      },
      
      {
        "type": "Set",
        "name": "æ‰¿èªçŠ¶æ…‹åˆæœŸåŒ–",
        "parameters": {
          "values": {
            "current_step": 1,
            "workflow_status": "in_progress",
            "pending_approvers": "={{$json.approval_metadata.approval_chain.filter(a => a.status === 'pending').map(a => a.approver_role)}}",
            "next_deadline": "={{$json.approval_metadata.approval_chain[0].deadline}}"
          },
          "options": {
            "dotNotation": false
          }
        }
      },
      
      {
        "type": "Loop Over Items",
        "name": "æ‰¿èªã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œ",
        "parameters": {
          "batchSize": 1
        }
      },
      
      {
        "type": "Code",
        "name": "æ‰¿èªé€šçŸ¥ç”Ÿæˆ",
        "parameters": {
          "jsCode": `
            const approval = $input.first().json;
            const currentStep = approval.approval_metadata.approval_chain[approval.current_step - 1];
            
            // æ‰¿èªè€…å‘ã‘é€šçŸ¥å†…å®¹ç”Ÿæˆ
            const generateApprovalNotification = (approval, step) => {
              const notification = {
                notification_id: 'notif_' + Date.now(),
                recipient: step.approver_details.email,
                recipient_name: step.approver_details.name,
                notification_type: 'approval_request',
                priority: approval.approval_metadata.priority,
                
                content: {
                  title: \`æ‰¿èªä¾é ¼: \${approval.title}\`,
                  summary: \`\${approval.requester_name}ã•ã‚“ã‹ã‚‰\${approval.category}ã®æ‰¿èªä¾é ¼ãŒã‚ã‚Šã¾ã™ã€‚\`,
                  details: {
                    requester: approval.requester_name,
                    department: approval.department,
                    amount: approval.amount,
                    category: approval.category,
                    description: approval.description,
                    urgency: approval.urgency || 'normal',
                    deadline: step.deadline,
                    step_number: step.step,
                    total_steps: approval.approval_metadata.total_steps
                  },
                  
                  actions: [
                    {
                      type: 'approve',
                      text: 'æ‰¿èª',
                      url: \`\${process.env.APPROVAL_BASE_URL}/approve/\${approval.approval_metadata.flow_id}/\${step.step}\`,
                      style: 'primary'
                    },
                    {
                      type: 'reject',
                      text: 'å´ä¸‹', 
                      url: \`\${process.env.APPROVAL_BASE_URL}/reject/\${approval.approval_metadata.flow_id}/\${step.step}\`,
                      style: 'danger'
                    },
                    {
                      type: 'details',
                      text: 'è©³ç´°ç¢ºèª',
                      url: \`\${process.env.APPROVAL_BASE_URL}/details/\${approval.approval_metadata.flow_id}\`,
                      style: 'secondary'
                    }
                  ]
                },
                
                delivery_options: {
                  email: true,
                  slack: step.approver_role !== 'ceo', // CEOã¯ãƒ¡ãƒ¼ãƒ«ã®ã¿
                  sms: approval.approval_metadata.priority === 'critical',
                  push_notification: true
                },
                
                escalation: {
                  enabled: true,
                  hours: step.escalation_hours,
                  escalation_to: getEscalationTarget(step.approver_role),
                  reminder_intervals: [24, 12, 2] // æ™‚é–“å‰ã«ãƒªãƒã‚¤ãƒ³ãƒ‰
                }
              };
              
              return notification;
            };
            
            const getEscalationTarget = (currentApprover) => {
              const escalationChain = {
                direct_manager: 'department_head',
                department_head: 'cfo',
                hr_manager: 'cfo',
                legal_counsel: 'cfo',
                cfo: 'ceo',
                ceo: 'board' // å–ç· å½¹ä¼š
              };
              return escalationChain[currentApprover] || 'admin';
            };
            
            const notification = generateApprovalNotification(approval, currentStep);
            
            return [{
              ...approval,
              current_notification: notification,
              workflow_status: 'awaiting_approval',
              last_action_at: new Date().toISOString()
            }];
          `
        }
      },
      
      {
        "type": "Gmail", 
        "name": "æ‰¿èªä¾é ¼ãƒ¡ãƒ¼ãƒ«é€ä¿¡",
        "parameters": {
          "operation": "send",
          "toList": "={{$json.current_notification.recipient}}",
          "subject": "ã€æ‰¿èªä¾é ¼ã€‘{{$json.current_notification.content.title}}",
          "message": `
            <html>
            <head>
              <style>
                .approval-container { max-width: 700px; margin: 0 auto; font-family: 'Helvetica Neue', Arial, sans-serif; }
                .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }
                .content { padding: 30px; background: #ffffff; }
                .details-box { background: #f8f9fa; border-left: 4px solid #007bff; padding: 20px; margin: 20px 0; }
                .action-buttons { text-align: center; margin: 30px 0; }
                .btn { display: inline-block; padding: 12px 30px; margin: 0 10px; text-decoration: none; border-radius: 6px; font-weight: bold; }
                .btn-approve { background: #28a745; color: white; }
                .btn-reject { background: #dc3545; color: white; }
                .btn-details { background: #6c757d; color: white; }
                .urgency-high { border-left-color: #dc3545 !important; background: #fff5f5; }
                .urgency-critical { border-left-color: #dc3545 !important; background: #ffe6e6; }
                .footer { background: #f8f9fa; padding: 20px; font-size: 12px; color: #6c757d; text-align: center; }
              </style>
            </head>
            <body>
              <div class="approval-container">
                <div class="header">
                  <h1>æ‰¿èªä¾é ¼</h1>
                  <p>ã‚¹ãƒ†ãƒƒãƒ— {{$json.current_notification.content.details.step_number}} / {{$json.current_notification.content.details.total_steps}}</p>
                </div>
                
                <div class="content">
                  <p>{{$json.current_notification.recipient_name}} æ§˜</p>
                  <p>ä»¥ä¸‹ã®ä»¶ã«ã¤ã„ã¦æ‰¿èªã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚</p>
                  
                  <div class="details-box urgency-{{$json.current_notification.content.details.urgency}}">
                    <h3>{{$json.current_notification.content.title}}</h3>
                    <table style="width: 100%; margin-top: 15px;">
                      <tr><td><strong>ç”³è«‹è€…:</strong></td><td>{{$json.current_notification.content.details.requester}}</td></tr>
                      <tr><td><strong>éƒ¨é–€:</strong></td><td>{{$json.current_notification.content.details.department}}</td></tr>
                      <tr><td><strong>é‡‘é¡:</strong></td><td>Â¥{{$json.current_notification.content.details.amount | number}}</td></tr>
                      <tr><td><strong>ã‚«ãƒ†ã‚´ãƒª:</strong></td><td>{{$json.current_notification.content.details.category}}</td></tr>
                      <tr><td><strong>ç·Šæ€¥åº¦:</strong></td><td>{{$json.current_notification.content.details.urgency}}</td></tr>
                      <tr><td><strong>æœŸé™:</strong></td><td>{{$json.current_notification.content.details.deadline | date}}</td></tr>
                    </table>
                    
                    <div style="margin-top: 15px;">
                      <strong>è©³ç´°:</strong><br>
                      {{$json.current_notification.content.details.description}}
                    </div>
                  </div>
                  
                  <div class="action-buttons">
                    <a href="{{$json.current_notification.content.actions[0].url}}" class="btn btn-approve">âœ“ æ‰¿èª</a>
                    <a href="{{$json.current_notification.content.actions[1].url}}" class="btn btn-reject">âœ— å´ä¸‹</a>
                    <a href="{{$json.current_notification.content.actions[2].url}}" class="btn btn-details">è©³ç´°ç¢ºèª</a>
                  </div>
                  
                  <p style="text-align: center; font-size: 14px; color: #6c757d;">
                    ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯è‡ªå‹•é€ä¿¡ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>
                    å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ç®¡ç†è€…ã«ã”é€£çµ¡ãã ã•ã„ã€‚
                  </p>
                </div>
                
                <div class="footer">
                  <p>æ‰¿èªã‚·ã‚¹ãƒ†ãƒ  | {{$json.approval_metadata.flow_id}}</p>
                </div>
              </div>
            </body>
            </html>
          `
        }
      }
    ]
  },
  
  "additional_features": {
    "auto_escalation": "æœŸé™è¶…éæ™‚ã®è‡ªå‹•ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
    "delegation_support": "æ‰¿èªè€…ã®ä»£ç†æ‰¿èªæ©Ÿèƒ½",
    "audit_trail": "å®Œå…¨ãªæ‰¿èªå±¥æ­´è¿½è·¡",
    "mobile_optimization": "ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã®æ‰¿èªç”»é¢",
    "integration_apis": "æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®APIé€£æº"
  }
}
```

### Pattern 7: ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆè«‹æ±‚æ›¸å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ 

```json
{
  "name": "AIé§†å‹•è«‹æ±‚æ›¸è‡ªå‹•å‡¦ç†",
  "description": "OCRãƒ»AIãƒ»è‡ªå‹•æ‰¿èªã‚’çµ„ã¿åˆã‚ã›ãŸè«‹æ±‚æ›¸å®Œå…¨è‡ªå‹•å‡¦ç†",
  "complexity": "ä¸Šç´š",
  "estimated_time": "2.5æ™‚é–“",
  
  "workflow": {
    "trigger": {
      "type": "Gmail Trigger",
      "name": "è«‹æ±‚æ›¸ãƒ¡ãƒ¼ãƒ«ç›£è¦–",
      "options": {
        "filters": {
          "subject": "*è«‹æ±‚æ›¸*,*invoice*,*bill*",
          "hasAttachments": true
        },
        "pollInterval": 300
      }
    },
    
    "nodes": [
      {
        "type": "Code",
        "name": "æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«è§£æãƒ»åˆ†é¡",
        "parameters": {
          "jsCode": `
            const email = $input.first().json;
            
            // æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«åˆ†æ
            const analyzeAttachments = (email) => {
              const attachments = email.attachments || [];
              const invoiceAttachments = [];
              const supportingDocs = [];
              
              attachments.forEach(attachment => {
                const fileName = attachment.name.toLowerCase();
                const fileExt = fileName.split('.').pop();
                
                // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—åˆ¤å®š
                const isPdf = fileExt === 'pdf';
                const isImage = ['jpg', 'jpeg', 'png', 'tiff'].includes(fileExt);
                const isInvoice = fileName.includes('è«‹æ±‚') || 
                                 fileName.includes('invoice') || 
                                 fileName.includes('bill');
                
                if ((isPdf || isImage) && isInvoice) {
                  invoiceAttachments.push({
                    ...attachment,
                    type: 'invoice',
                    processing_priority: 'high',
                    ocr_required: true
                  });
                } else if (isPdf || isImage) {
                  supportingDocs.push({
                    ...attachment,
                    type: 'supporting',
                    processing_priority: 'low',
                    ocr_required: isImage
                  });
                }
              });
              
              // ãƒ¡ãƒ¼ãƒ«é€ä¿¡è€…åˆ†æ
              const sender = email.from;
              const senderDomain = sender.split('@')[1];
              const isKnownVendor = checkKnownVendor(senderDomain);
              
              return {
                email_metadata: {
                  from: sender,
                  subject: email.subject,
                  received_at: email.receivedTime,
                  message_id: email.messageId,
                  sender_classification: isKnownVendor ? 'known_vendor' : 'unknown_sender'
                },
                invoice_attachments: invoiceAttachments,
                supporting_documents: supportingDocs,
                processing_status: {
                  total_attachments: attachments.length,
                  invoice_files: invoiceAttachments.length,
                  requires_manual_review: invoiceAttachments.length === 0,
                  estimated_processing_time: invoiceAttachments.length * 45 // 45ç§’/ãƒ•ã‚¡ã‚¤ãƒ«
                }
              };
            };
            
            const checkKnownVendor = (domain) => {
              const knownVendors = [
                'aws.amazon.com',
                'azure.microsoft.com', 
                'google.com',
                'office365.microsoft.com',
                'salesforce.com'
              ];
              return knownVendors.includes(domain);
            };
            
            return [analyzeAttachments(email)];
          `
        }
      },
      
      {
        "type": "Switch",
        "name": "å‡¦ç†ãƒ«ãƒ¼ãƒˆåˆ†å²",
        "parameters": {
          "conditions": {
            "options": [
              {
                "conditions": {
                  "boolean": [
                    {
                      "value1": "={{$json.processing_status.requires_manual_review}}",
                      "operation": "equal",
                      "value2": true
                    }
                  ]
                },
                "output": 0
              },
              {
                "conditions": {
                  "boolean": [
                    {
                      "value1": "={{$json.invoice_attachments.length}}",
                      "operation": "larger",
                      "value2": 0
                    }
                  ]
                },
                "output": 1
              }
            ]
          },
          "fallbackOutput": 2
        }
      },
      
      {
        "type": "HTTP Request",
        "name": "OCRç”»åƒãƒ»PDFè§£æ",
        "parameters": {
          "url": "https://api.ocr.space/parse/image",
          "method": "POST",
          "headers": {
            "apikey": "{{$env.OCR_API_KEY}}"
          },
          "body": {
            "base64Image": "data:{{$json.invoice_attachments[0].contentType}};base64,{{$json.invoice_attachments[0].content}}",
            "language": "jpn",
            "isOverlayRequired": true,
            "detectOrientation": true,
            "scale": true,
            "isTable": true,
            "OCREngine": 2
          }
        }
      },
      
      {
        "type": "OpenAI",
        "name": "è«‹æ±‚æ›¸å†…å®¹AIè§£æ",
        "parameters": {
          "model": "gpt-4-vision-preview",
          "systemPrompt": `
            ã‚ãªãŸã¯çµŒç†å‡¦ç†ã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã§ã™ã€‚
            
            OCRã§æŠ½å‡ºã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰è«‹æ±‚æ›¸ã®é‡è¦æƒ…å ±ã‚’æ§‹é€ åŒ–ã—ã¦æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
            
            æŠ½å‡ºé …ç›®ï¼š
            - è«‹æ±‚æ›¸ç•ªå·
            - ç™ºè¡Œæ—¥
            - æ”¯æ‰•æœŸé™
            - è«‹æ±‚å…ƒä¼šç¤¾åãƒ»ä½æ‰€ãƒ»é›»è©±ç•ªå·
            - è«‹æ±‚å…ˆä¼šç¤¾å
            - ç¨æŠœé‡‘é¡
            - æ¶ˆè²»ç¨é¡
            - ç¨è¾¼ç·é¡
            - æ˜ç´°è¡Œï¼ˆå“åã€æ•°é‡ã€å˜ä¾¡ã€é‡‘é¡ï¼‰
            - éŠ€è¡ŒæŒ¯è¾¼å…ˆæƒ…å ±
            - å‚™è€ƒãƒ»ç‰¹è¨˜äº‹é …
            
            å‡ºåŠ›å½¢å¼ï¼š
            {
              "invoice_number": "è«‹æ±‚æ›¸ç•ªå·",
              "issue_date": "YYYY-MM-DD",
              "due_date": "YYYY-MM-DD",
              "vendor": {
                "name": "ä¼šç¤¾å",
                "address": "ä½æ‰€",
                "phone": "é›»è©±ç•ªå·",
                "tax_id": "æ³•äººç•ªå·"
              },
              "bill_to": {
                "name": "è«‹æ±‚å…ˆä¼šç¤¾å",
                "department": "éƒ¨ç½²å"
              },
              "amounts": {
                "subtotal": æ•°å€¤,
                "tax": æ•°å€¤,
                "total": æ•°å€¤,
                "currency": "JPY"
              },
              "line_items": [
                {
                  "description": "å“å",
                  "quantity": æ•°å€¤,
                  "unit_price": æ•°å€¤,
                  "amount": æ•°å€¤
                }
              ],
              "payment_info": {
                "bank_name": "éŠ€è¡Œå",
                "branch": "æ”¯åº—å",
                "account_type": "æ™®é€š/å½“åº§",
                "account_number": "å£åº§ç•ªå·",
                "account_holder": "å£åº§åç¾©"
              },
              "notes": "å‚™è€ƒ",
              "confidence_score": 0.0-1.0,
              "validation_status": {
                "has_required_fields": boolean,
                "amount_validation": "OK/ERROR",
                "date_validation": "OK/ERROR",
                "vendor_validation": "KNOWN/UNKNOWN"
              }
            }
            
            æ•°å€¤ã¯å¿…ãšæ­£ç¢ºã«æŠ½å‡ºã—ã€æ–‡å­—åˆ—ã¯å«ã‚ãªã„ã§ãã ã•ã„ã€‚
          `,
          "userPrompt": `
            ä»¥ä¸‹ã®OCRãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰è«‹æ±‚æ›¸æƒ…å ±ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ï¼š
            
            {{$json.ParsedResults[0].ParsedText}}
            
            è«‹æ±‚æ›¸ã®é€ä¿¡è€…: {{$json.email_metadata.from}}
            é€ä¿¡è€…åˆ†é¡: {{$json.email_metadata.sender_classification}}
          `
        }
      },
      
      {
        "type": "Code",
        "name": "ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ»ãƒªã‚¹ã‚¯è©•ä¾¡",
        "parameters": {
          "jsCode": `
            const extractedData = JSON.parse($input.first().json.choices[0].message.content);
            const emailData = $input.all().find(item => item.json.email_metadata);
            
            // åŒ…æ‹¬çš„ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
            const validateInvoiceData = (data) => {
              const validationResults = {
                overall_score: 0,
                critical_issues: [],
                warnings: [],
                recommendations: [],
                processing_decision: 'pending'
              };
              
              let score = 100;
              
              // å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ¤œè¨¼
              const requiredFields = ['invoice_number', 'issue_date', 'due_date', 'total'];
              requiredFields.forEach(field => {
                if (!data[field] || (typeof data[field] === 'string' && data[field].trim() === '')) {
                  score -= 25;
                  validationResults.critical_issues.push(\`å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸è¶³: \${field}\`);
                }
              });
              
              // é‡‘é¡æ¤œè¨¼
              const total = parseFloat(data.amounts?.total) || 0;
              const subtotal = parseFloat(data.amounts?.subtotal) || 0;
              const tax = parseFloat(data.amounts?.tax) || 0;
              
              if (Math.abs((subtotal + tax) - total) > 1) {
                score -= 15;
                validationResults.critical_issues.push('ç¨è¾¼ã¿è¨ˆç®—ãŒä¸€è‡´ã—ã¾ã›ã‚“');
              }
              
              if (total > 1000000) {
                score -= 10;
                validationResults.warnings.push('é«˜é¡è«‹æ±‚æ›¸ã§ã™ï¼ˆæ‰¿èªãƒ¬ãƒ™ãƒ«è¦ç¢ºèªï¼‰');
              }
              
              // æ—¥ä»˜æ¤œè¨¼
              const issueDate = new Date(data.issue_date);
              const dueDate = new Date(data.due_date);
              const today = new Date();
              
              if (issueDate > today) {
                score -= 10;
                validationResults.warnings.push('ç™ºè¡Œæ—¥ãŒæœªæ¥æ—¥ä»˜ã§ã™');
              }
              
              if (dueDate < today) {
                score -= 5;
                validationResults.warnings.push('æ”¯æ‰•æœŸé™ãŒéãã¦ã„ã¾ã™');
              }
              
              // ãƒ™ãƒ³ãƒ€ãƒ¼æ¤œè¨¼
              if (data.validation_status?.vendor_validation === 'UNKNOWN') {
                score -= 20;
                validationResults.warnings.push('æœªç™»éŒ²ãƒ™ãƒ³ãƒ€ãƒ¼ã‹ã‚‰ã®è«‹æ±‚æ›¸ã§ã™');
              }
              
              // é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼ˆç°¡æ˜“ç‰ˆï¼‰
              const invoiceSignature = \`\${data.vendor?.name}_\${data.invoice_number}_\${data.amounts?.total}\`;
              // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§é‡è¤‡ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†
              
              // å‡¦ç†æ±ºå®šãƒ­ã‚¸ãƒƒã‚¯
              validationResults.overall_score = Math.max(score, 0);
              
              if (validationResults.overall_score >= 90 && validationResults.critical_issues.length === 0) {
                validationResults.processing_decision = 'auto_approve';
                validationResults.recommendations.push('è‡ªå‹•æ‰¿èªå¯èƒ½');
              } else if (validationResults.overall_score >= 70 && validationResults.critical_issues.length <= 1) {
                validationResults.processing_decision = 'review_required';
                validationResults.recommendations.push('äººçš„ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå¿…è¦');
              } else {
                validationResults.processing_decision = 'manual_processing';
                validationResults.recommendations.push('æ‰‹å‹•å‡¦ç†ãŒå¿…è¦');
              }
              
              return validationResults;
            };
            
            // æ‰¿èªè€…æ±ºå®š
            const determineApprovers = (data, validation) => {
              const total = parseFloat(data.amounts?.total) || 0;
              const approvers = [];
              
              if (total < 50000) {
                approvers.push('department_manager');
              } else if (total < 200000) {
                approvers.push('department_manager', 'finance_manager');  
              } else if (total < 1000000) {
                approvers.push('department_manager', 'finance_manager', 'cfo');
              } else {
                approvers.push('department_manager', 'finance_manager', 'cfo', 'ceo');
              }
              
              // ãƒªã‚¹ã‚¯ãƒ™ãƒ¼ã‚¹ã®è¿½åŠ æ‰¿èª
              if (validation.overall_score < 80) {
                if (!approvers.includes('finance_manager')) {
                  approvers.push('finance_manager');
                }
              }
              
              return approvers;
            };
            
            const validation = validateInvoiceData(extractedData);
            const approvers = determineApprovers(extractedData, validation);
            
            return [{
              extracted_data: extractedData,
              validation: validation,
              approval_workflow: {
                required_approvers: approvers,
                processing_decision: validation.processing_decision,
                estimated_approval_time: approvers.length * 24 // 24æ™‚é–“/æ‰¿èªè€…
              },
              email_context: emailData?.json?.email_metadata,
              processing_timestamp: new Date().toISOString()
            }];
          `
        }
      },
      
      {
        "type": "Switch", 
        "name": "å‡¦ç†æ±ºå®šãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°",
        "parameters": {
          "conditions": {
            "options": [
              {
                "conditions": {
                  "string": [
                    {
                      "value1": "={{$json.validation.processing_decision}}",
                      "operation": "equals",
                      "value2": "auto_approve"
                    }
                  ]
                },
                "output": 0
              },
              {
                "conditions": {
                  "string": [
                    {
                      "value1": "={{$json.validation.processing_decision}}",
                      "operation": "equals", 
                      "value2": "review_required"
                    }
                  ]
                },
                "output": 1
              }
            ]
          },
          "fallbackOutput": 2
        }
      },
      
      {
        "type": "HTTP Request",
        "name": "çµŒç†ã‚·ã‚¹ãƒ†ãƒ è‡ªå‹•ç™»éŒ²",
        "parameters": {
          "url": "{{$env.ACCOUNTING_API_URL}}/invoices",
          "method": "POST",
          "headers": {
            "Authorization": "Bearer {{$env.ACCOUNTING_TOKEN}}",
            "Content-Type": "application/json"
          },
          "body": {
            "invoice_data": "={{$json.extracted_data}}",
            "processing_metadata": {
              "source": "automated_processing",
              "confidence_score": "={{$json.validation.overall_score}}",
              "processing_timestamp": "={{$json.processing_timestamp}}",
              "auto_approved": true
            },
            "approval_status": "approved",
            "next_action": "schedule_payment"
          }
        }
      }
    ]
  },
  
  "success_metrics": {
    "processing_accuracy": "> 95%",
    "auto_approval_rate": "> 70%", 
    "processing_time": "< 5 minutes",
    "error_rate": "< 2%"
  }
}
```

---

## ğŸ¯ ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è‡ªå‹•åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ12é¸ï¼‰

### Pattern 8: SNSæŠ•ç¨¿è‡ªå‹•åŒ–ãƒ»ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç®¡ç†

```json
{
  "name": "AIé§†å‹•SNSæŠ•ç¨¿è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ ",
  "description": "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆã‹ã‚‰ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç®¡ç†ã¾ã§å®Œå…¨è‡ªå‹•åŒ–",
  "complexity": "ä¸­ç´š",
  "estimated_time": "1æ™‚é–“",
  
  "workflow": {
    "trigger": {
      "type": "Schedule Trigger",
      "cron": "0 9,12,15,18 * * *",
      "name": "1æ—¥4å›æŠ•ç¨¿ï¼ˆ9æ™‚ã€12æ™‚ã€15æ™‚ã€18æ™‚ï¼‰"
    },
    
    "nodes": [
      {
        "type": "HTTP Request",
        "name": "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚½ãƒ¼ã‚¹å–å¾—",
        "parameters": {
          "url": "https://newsapi.org/v2/everything",
          "method": "GET",
          "qs": {
            "q": "{{$env.BRAND_KEYWORDS}}",
            "language": "ja",
            "sortBy": "popularity",
            "pageSize": 10,
            "apiKey": "{{$env.NEWS_API_KEY}}"
          }
        }
      },
      
      {
        "type": "Code",
        "name": "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æãƒ»é¸å®š",
        "parameters": {
          "jsCode": `
            const articles = $input.first().json.articles || [];
            
            // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æãƒ»ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
            const analyzeContent = (articles) => {
              const currentHour = new Date().getHours();
              
              return articles.map(article => {
                let relevanceScore = 0;
                
                // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é–¢é€£æ€§
                const brandKeywords = (process.env.BRAND_KEYWORDS || '').split(',');
                const title = article.title.toLowerCase();
                const description = (article.description || '').toLowerCase();
                
                brandKeywords.forEach(keyword => {
                  if (title.includes(keyword.toLowerCase())) relevanceScore += 10;
                  if (description.includes(keyword.toLowerCase())) relevanceScore += 5;
                });
                
                // æ™‚é–“å¸¯é©å¿œæ€§
                const timeMultiplier = getTimeMultiplier(currentHour, article);
                relevanceScore *= timeMultiplier;
                
                // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆäºˆæ¸¬
                const engagementPrediction = predictEngagement(article, currentHour);
                
                return {
                  ...article,
                  relevance_score: relevanceScore,
                  engagement_prediction: engagementPrediction,
                  optimal_posting_time: currentHour,
                  suggested_hashtags: generateHashtags(article),
                  content_type: classifyContentType(article)
                };
              }).sort((a, b) => b.relevance_score - a.relevance_score);
            };
            
            const getTimeMultiplier = (hour, article) => {
              // æ™‚é–“å¸¯ã«ã‚ˆã‚‹é‡ã¿ä»˜ã‘
              const timeWeights = {
                9: { business: 1.5, tech: 1.3, lifestyle: 0.8 },
                12: { business: 1.2, lifestyle: 1.5, food: 1.8 },
                15: { tech: 1.4, education: 1.3, business: 1.1 },
                18: { lifestyle: 1.6, entertainment: 1.4, food: 1.3 }
              };
              
              const category = classifyContentType(article);
              return timeWeights[hour]?.[category] || 1.0;
            };
            
            const predictEngagement = (article, hour) => {
              let score = 50; // ãƒ™ãƒ¼ã‚¹ã‚¹ã‚³ã‚¢
              
              // ã‚¿ã‚¤ãƒˆãƒ«ã®é­…åŠ›åº¦
              if (article.title.includes('æ–°')) score += 10;
              if (article.title.includes('ç™ºè¡¨') || article.title.includes('ãƒªãƒªãƒ¼ã‚¹')) score += 8;
              if (article.title.includes('AI') || article.title.includes('DX')) score += 12;
              
              // æ™‚é–“å¸¯è£œæ­£
              const peakHours = [9, 12, 15, 18, 20];
              if (peakHours.includes(hour)) score += 15;
              
              // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ–°ã—ã•
              const publishedTime = new Date(article.publishedAt);
              const hoursOld = (Date.now() - publishedTime.getTime()) / (1000 * 60 * 60);
              if (hoursOld < 6) score += 20;
              else if (hoursOld < 24) score += 10;
              
              return Math.min(score, 100);
            };
            
            const classifyContentType = (article) => {
              const title = article.title.toLowerCase();
              const description = (article.description || '').toLowerCase();
              const text = title + ' ' + description;
              
              if (text.includes('ãƒ“ã‚¸ãƒã‚¹') || text.includes('çµŒå–¶')) return 'business';
              if (text.includes('æŠ€è¡“') || text.includes('AI') || text.includes('DX')) return 'tech';
              if (text.includes('ãƒ©ã‚¤ãƒ•') || text.includes('åƒãæ–¹')) return 'lifestyle';
              if (text.includes('é£Ÿ') || text.includes('ã‚°ãƒ«ãƒ¡')) return 'food';
              if (text.includes('æ•™è‚²') || text.includes('å­¦ç¿’')) return 'education';
              return 'general';
            };
            
            const generateHashtags = (article) => {
              const baseHashtags = ['#ãƒ“ã‚¸ãƒã‚¹', '#DX', '#AI', '#åƒãæ–¹æ”¹é©'];
              const category = classifyContentType(article);
              
              const categoryHashtags = {
                business: ['#çµŒå–¶', '#ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—', '#æŠ•è³‡'],
                tech: ['#ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼', '#ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³', '#IT'],
                lifestyle: ['#ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«', '#å¥åº·', '#ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹'],
                food: ['#ã‚°ãƒ«ãƒ¡', '#ãƒ¬ã‚·ãƒ”', '#å¥åº·é£Ÿå“'],
                education: ['#å­¦ç¿’', '#ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—', '#æ•™è‚²']
              };
              
              return [...baseHashtags, ...(categoryHashtags[category] || [])];
            };
            
            const analyzedArticles = analyzeContent(articles);
            const topArticle = analyzedArticles[0];
            
            return [{
              selected_article: topArticle,
              all_candidates: analyzedArticles,
              selection_metadata: {
                total_candidates: articles.length,
                selection_reason: 'highest_relevance_score',
                current_time_slot: new Date().getHours(),
                expected_engagement: topArticle?.engagement_prediction || 0
              }
            }];
          `
        }
      },
      
      {
        "type": "OpenAI",
        "name": "æŠ•ç¨¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ",
        "parameters": {
          "model": "gpt-4",
          "temperature": 0.8,
          "systemPrompt": `
            ã‚ãªãŸã¯SNSãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã®å°‚é–€å®¶ã§ã™ã€‚
            
            ä¸ãˆã‚‰ã‚ŒãŸãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ã‚’åŸºã«ã€ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆã®é«˜ã„SNSæŠ•ç¨¿ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
            
            è¦ä»¶ï¼š
            - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã”ã¨ã«æœ€é©åŒ–ï¼ˆTwitterã€Facebookã€LinkedInï¼‰
            - è¦ªã—ã¿ã‚„ã™ãã€ã§ã‚‚ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªãƒˆãƒ¼ãƒ³
            - è¡Œå‹•å–šèµ·ï¼ˆCTAï¼‰ã‚’å«ã‚€
            - é©åˆ‡ãªãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ä½¿ç”¨
            - æ–‡å­—æ•°åˆ¶é™ã«æº–æ‹ 
            
            å‡ºåŠ›å½¢å¼ï¼š
            {
              "twitter": {
                "text": "ãƒ„ã‚¤ãƒ¼ãƒˆæœ¬æ–‡ï¼ˆ140æ–‡å­—ä»¥å†…ï¼‰",
                "hashtags": ["#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°1", "#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°2"],
                "cta": "Call to Action"
              },
              "facebook": {
                "text": "FacebookæŠ•ç¨¿æ–‡ï¼ˆ500æ–‡å­—ç¨‹åº¦ï¼‰",
                "hashtags": ["#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°1", "#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°2"],
                "cta": "Call to Action"
              },
              "linkedin": {
                "text": "LinkedInæŠ•ç¨¿æ–‡ï¼ˆ700æ–‡å­—ç¨‹åº¦ï¼‰",
                "hashtags": ["#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°1", "#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°2"],
                "cta": "Call to Action"
              },
              "meta": {
                "engagement_tips": ["ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆå‘ä¸Šã®ã‚³ãƒ„"],
                "best_posting_time": "æœ€é©æŠ•ç¨¿æ™‚åˆ»",
                "expected_reach": "äºˆæƒ³ãƒªãƒ¼ãƒæ•°"
              }
            }
          `,
          "userPrompt": `
            ä»¥ä¸‹ã®è¨˜äº‹æƒ…å ±ã‚’åŸºã«ã€SNSæŠ•ç¨¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š
            
            è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«: {{$json.selected_article.title}}
            è¨˜äº‹æ¦‚è¦: {{$json.selected_article.description}}
            è¨˜äº‹URL: {{$json.selected_article.url}}
            ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—: {{$json.selected_article.content_type}}
            æ¨å¥¨ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°: {{$json.selected_article.suggested_hashtags}}
            æŠ•ç¨¿æ™‚é–“å¸¯: {{$json.selection_metadata.current_time_slot}}æ™‚
            
            ãƒ–ãƒ©ãƒ³ãƒ‰æƒ…å ±:
            - ä¼šç¤¾å: {{$env.COMPANY_NAME}}
            - æ¥­ç•Œ: {{$env.INDUSTRY}}
            - ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: {{$env.TARGET_AUDIENCE}}
            
            ä»Šæ—¥ã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³: {{$env.CURRENT_CAMPAIGN || "ãªã—"}}
          `
        }
      },
      
      {
        "type": "Code",
        "name": "æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°",
        "parameters": {
          "jsCode": `
            const content = JSON.parse($input.first().json.choices[0].message.content);
            const article = $input.all().find(item => item.json.selected_article)?.json.selected_article;
            
            // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥æŠ•ç¨¿æˆ¦ç•¥
            const createPostingStrategy = (content, article) => {
              const currentHour = new Date().getHours();
              const platforms = ['twitter', 'facebook', 'linkedin'];
              
              return platforms.map(platform => {
                const platformContent = content[platform];
                const delay = getPlatformDelay(platform, currentHour);
                
                return {
                  platform: platform,
                  content: {
                    text: platformContent.text,
                    hashtags: platformContent.hashtags.join(' '),
                    full_post: platformContent.text + '\\n\\n' + platformContent.hashtags.join(' ') + '\\n\\n' + platformContent.cta,
                    url: article.url,
                    image_url: article.urlToImage
                  },
                  scheduling: {
                    post_immediately: delay === 0,
                    delay_minutes: delay,
                    scheduled_time: new Date(Date.now() + delay * 60000).toISOString(),
                    timezone: 'Asia/Tokyo'
                  },
                  targeting: {
                    audience: getPlatformAudience(platform),
                    boost_budget: getPlatformBoostBudget(platform, article.engagement_prediction),
                    geographic_target: ['Japan']
                  },
                  monitoring: {
                    track_engagement: true,
                    alert_threshold: {
                      likes: getPlatformMetrics(platform).likes,
                      shares: getPlatformMetrics(platform).shares,
                      comments: getPlatformMetrics(platform).comments
                    }
                  }
                };
              });
            };
            
            const getPlatformDelay = (platform, currentHour) => {
              // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥æœ€é©æŠ•ç¨¿é–“éš”
              const delays = {
                twitter: 0,      // å³æ™‚æŠ•ç¨¿
                facebook: 15,    // 15åˆ†å¾Œ
                linkedin: 30     // 30åˆ†å¾Œ
              };
              
              // å–¶æ¥­æ™‚é–“å¤–ã®å ´åˆã¯ç¿Œæœã«å»¶æœŸ
              if (currentHour < 9 || currentHour > 18) {
                const nextMorning = new Date();
                nextMorning.setDate(nextMorning.getDate() + 1);
                nextMorning.setHours(9, 0, 0, 0);
                return Math.floor((nextMorning.getTime() - Date.now()) / (1000 * 60));
              }
              
              return delays[platform] || 0;
            };
            
            const getPlatformAudience = (platform) => {
              const audiences = {
                twitter: 'tech_professionals',
                facebook: 'general_business',
                linkedin: 'business_professionals'
              };
              return audiences[platform];
            };
            
            const getPlatformBoostBudget = (platform, engagementPrediction) => {
              const baseBudgets = {
                twitter: 1000,
                facebook: 2000,  
                linkedin: 1500
              };
              
              const multiplier = engagementPrediction > 70 ? 1.5 : 1.0;
              return Math.round(baseBudgets[platform] * multiplier);
            };
            
            const getPlatformMetrics = (platform) => {
              const thresholds = {
                twitter: { likes: 50, shares: 10, comments: 5 },
                facebook: { likes: 30, shares: 5, comments: 8 },
                linkedin: { likes: 20, shares: 3, comments: 10 }
              };
              return thresholds[platform];
            };
            
            const postingStrategy = createPostingStrategy(content, article);
            
            return [{
              posting_plan: postingStrategy,
              content_metadata: {
                source_article: article.title,
                content_type: article.content_type,
                expected_total_reach: postingStrategy.reduce((sum, p) => sum + p.targeting.boost_budget, 0),
                campaign_id: 'campaign_' + Date.now()
              },
              generated_content: content
            }];
          `
        }
      },
      
      {
        "type": "HTTP Request",
        "name": "TwitteræŠ•ç¨¿",
        "parameters": {
          "url": "https://api.twitter.com/2/tweets",
          "method": "POST",
          "headers": {
            "Authorization": "Bearer {{$env.TWITTER_BEARER_TOKEN}}",
            "Content-Type": "application/json"
          },
          "body": {
            "text": "={{$json.posting_plan[0].content.full_post}}"
          }
        }
      },
      
      {
        "type": "Facebook",
        "name": "FacebookæŠ•ç¨¿",
        "parameters": {
          "operation": "createPost",
          "pageId": "{{$env.FACEBOOK_PAGE_ID}}",
          "message": "={{$json.posting_plan[1].content.full_post}}",
          "link": "={{$json.posting_plan[1].content.url}}"
        }
      },
      
      {
        "type": "LinkedIn",
        "name": "LinkedInæŠ•ç¨¿", 
        "parameters": {
          "operation": "createPost",
          "text": "={{$json.posting_plan[2].content.full_post}}",
          "visibility": "PUBLIC"
        }
      },
      
      {
        "type": "Code",
        "name": "æŠ•ç¨¿çµæœé›†è¨ˆãƒ»åˆ†æ",
        "parameters": {
          "jsCode": `
            const results = $input.all();
            const twitterResult = results.find(r => r.json && r.json.data && r.json.data.id);
            const facebookResult = results.find(r => r.json && r.json.id && !r.json.data);
            const linkedinResult = results.find(r => r.json && r.json.id && r.json.activity);
            
            const summary = {
              campaign_id: 'campaign_' + Date.now(),
              posting_timestamp: new Date().toISOString(),
              platforms: {
                twitter: {
                  success: !!twitterResult,
                  post_id: twitterResult?.json?.data?.id,
                  url: twitterResult ? \`https://twitter.com/user/status/\${twitterResult.json.data.id}\` : null
                },
                facebook: {
                  success: !!facebookResult,
                  post_id: facebookResult?.json?.id,
                  url: facebookResult ? \`https://facebook.com/\${process.env.FACEBOOK_PAGE_ID}/posts/\${facebookResult.json.id}\` : null
                },
                linkedin: {
                  success: !!linkedinResult,
                  post_id: linkedinResult?.json?.id,
                  url: linkedinResult?.json?.activity || null
                }
              },
              success_rate: [twitterResult, facebookResult, linkedinResult].filter(Boolean).length / 3,
              next_monitoring_check: new Date(Date.now() + 60 * 60 * 1000).toISOString(), // 1æ™‚é–“å¾Œ
              performance_tracking: {
                initial_metrics_collection: new Date(Date.now() + 30 * 60 * 1000).toISOString(), // 30åˆ†å¾Œ
                full_analytics_report: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString() // 24æ™‚é–“å¾Œ
              }
            };
            
            return [summary];
          `
        }
      }
    ]
  },
  
  "monitoring_workflow": {
    "engagement_tracking": "1æ™‚é–“æ¯ã«ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç›£è¦–",
    "performance_analysis": "24æ™‚é–“å¾Œã«è©³ç´°åˆ†æ",
    "content_optimization": "ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãæ¬¡å›ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–"
  }
}
```

---

## ğŸš¨ ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ5é¸ï¼‰

### Pattern 9: åŒ…æ‹¬çš„ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ãƒ»è‡ªå‹•å¾©æ—§

```json
{
  "name": "AIé§†å‹•ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ãƒ»è‡ªå‹•å¾©æ—§",
  "description": "å¤šæ¬¡å…ƒç›£è¦–ã¨ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆè‡ªå‹•å¾©æ—§ã‚’çµ„ã¿åˆã‚ã›ãŸã‚·ã‚¹ãƒ†ãƒ ",
  "complexity": "ä¸Šç´š",
  "estimated_time": "3æ™‚é–“",
  
  "workflow": {
    "trigger": {
      "type": "Schedule Trigger",
      "cron": "*/2 * * * *",
      "name": "2åˆ†æ¯ã‚·ã‚¹ãƒ†ãƒ ãƒã‚§ãƒƒã‚¯"
    },
    
    "nodes": [
      {
        "type": "Code",
        "name": "ãƒãƒ«ãƒãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†",
        "parameters": {
          "jsCode": `
            // åŒ…æ‹¬çš„ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
            const collectSystemMetrics = async () => {
              const metrics = {
                timestamp: new Date().toISOString(),
                infrastructure: await collectInfraMetrics(),
                application: await collectAppMetrics(),
                business: await collectBusinessMetrics(),
                security: await collectSecurityMetrics(),
                user_experience: await collectUXMetrics()
              };
              
              // ç·åˆå¥å…¨æ€§ã‚¹ã‚³ã‚¢ç®—å‡º
              metrics.overall_health = calculateOverallHealth(metrics);
              metrics.anomaly_detection = detectAnomalies(metrics);
              metrics.predicted_issues = predictFutureIssues(metrics);
              
              return metrics;
            };
            
            const collectInfraMetrics = async () => {
              // ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¡ãƒˆãƒªã‚¯ã‚¹
              return {
                servers: {
                  cpu_usage: await getCPUUsage(),
                  memory_usage: await getMemoryUsage(),
                  disk_usage: await getDiskUsage(),
                  network_io: await getNetworkIO(),
                  active_connections: await getActiveConnections()
                },
                databases: {
                  connection_pool: await getDBConnections(),
                  query_performance: await getQueryStats(),
                  replication_lag: await getReplicationLag(),
                  table_locks: await getTableLocks()
                },
                apis: {
                  response_times: await getAPIResponseTimes(),
                  error_rates: await getAPIErrorRates(),
                  throughput: await getAPIThroughput(),
                  availability: await getAPIAvailability()
                }
              };
            };
            
            const collectAppMetrics = async () => {
              // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒˆãƒªã‚¯ã‚¹
              return {
                performance: {
                  page_load_times: await getPageLoadTimes(),
                  transaction_times: await getTransactionTimes(),
                  cache_hit_rates: await getCacheHitRates(),
                  queue_lengths: await getQueueLengths()
                },
                errors: {
                  error_count: await getErrorCounts(),
                  error_types: await getErrorTypes(),
                  critical_errors: await getCriticalErrors(),
                  error_trends: await getErrorTrends()
                },
                features: {
                  feature_usage: await getFeatureUsage(),
                  user_journeys: await getUserJourneys(),
                  conversion_rates: await getConversionRates()
                }
              };
            };
            
            const collectBusinessMetrics = async () => {
              // ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
              return {
                revenue: {
                  hourly_revenue: await getHourlyRevenue(),
                  transaction_volume: await getTransactionVolume(),
                  average_order_value: await getAverageOrderValue()
                },
                customers: {
                  active_users: await getActiveUsers(),
                  new_registrations: await getNewRegistrations(),
                  churn_indicators: await getChurnIndicators()
                },
                operations: {
                  support_tickets: await getSupportTickets(),
                  processing_queues: await getProcessingQueues(),
                  sla_compliance: await getSLACompliance()
                }
              };
            };
            
            const collectSecurityMetrics = async () => {
              // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ãƒˆãƒªã‚¯ã‚¹
              return {
                access: {
                  failed_login_attempts: await getFailedLogins(),
                  suspicious_activities: await getSuspiciousActivities(),
                  privilege_escalations: await getPrivilegeEscalations()
                },
                threats: {
                  blocked_attacks: await getBlockedAttacks(),
                  malware_detections: await getMalwareDetections(),
                  vulnerability_scans: await getVulnerabilityScans()
                }
              };
            };
            
            const collectUXMetrics = async () => {
              // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
              return {
                satisfaction: {
                  nps_score: await getNPSScore(),
                  user_feedback: await getUserFeedback(),
                  support_satisfaction: await getSupportSatisfaction()
                },
                engagement: {
                  session_duration: await getSessionDuration(),
                  bounce_rate: await getBounceRate(),
                  feature_adoption: await getFeatureAdoption()
                }
              };
            };
            
            const calculateOverallHealth = (metrics) => {
              let healthScore = 100;
              const weights = {
                infrastructure: 0.3,
                application: 0.25,
                business: 0.2,
                security: 0.15,
                user_experience: 0.1
              };
              
              // ã‚¤ãƒ³ãƒ•ãƒ©å¥å…¨æ€§
              if (metrics.infrastructure.servers.cpu_usage > 80) healthScore -= 15;
              if (metrics.infrastructure.servers.memory_usage > 85) healthScore -= 20;
              if (metrics.infrastructure.apis.error_rates > 5) healthScore -= 25;
              
              // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¥å…¨æ€§
              if (metrics.application.performance.page_load_times > 3000) healthScore -= 10;
              if (metrics.application.errors.critical_errors > 0) healthScore -= 30;
              
              // ãƒ“ã‚¸ãƒã‚¹å¥å…¨æ€§
              const revenueChange = calculateRevenueChange(metrics.business.revenue);
              if (revenueChange < -10) healthScore -= 15;
              
              // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¥å…¨æ€§
              if (metrics.security.threats.blocked_attacks > 100) healthScore -= 10;
              if (metrics.security.access.failed_login_attempts > 1000) healthScore -= 5;
              
              return Math.max(healthScore, 0);
            };
            
            const detectAnomalies = (metrics) => {
              const anomalies = [];
              
              // CPUä½¿ç”¨ç‡ã®ç•°å¸¸æ¤œçŸ¥
              if (metrics.infrastructure.servers.cpu_usage > 90) {
                anomalies.push({
                  type: 'cpu_spike',
                  severity: 'critical',
                  value: metrics.infrastructure.servers.cpu_usage,
                  threshold: 90,
                  impact: 'system_performance'
                });
              }
              
              // ã‚¨ãƒ©ãƒ¼ç‡ã®ç•°å¸¸æ¤œçŸ¥
              if (metrics.infrastructure.apis.error_rates > 10) {
                anomalies.push({
                  type: 'high_error_rate',
                  severity: 'high',
                  value: metrics.infrastructure.apis.error_rates,
                  threshold: 10,
                  impact: 'user_experience'
                });
              }
              
              // ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã®ç•°å¸¸æ¤œçŸ¥
              if (metrics.infrastructure.apis.response_times > 5000) {
                anomalies.push({
                  type: 'slow_response',
                  severity: 'medium',
                  value: metrics.infrastructure.apis.response_times,
                  threshold: 5000,
                  impact: 'user_experience'
                });
              }
              
              return anomalies;
            };
            
            const predictFutureIssues = (metrics) => {
              const predictions = [];
              
              // ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡äºˆæ¸¬
              const diskGrowthRate = calculateDiskGrowthRate(metrics);
              if (diskGrowthRate > 0) {
                const daysUntilFull = (100 - metrics.infrastructure.servers.disk_usage) / diskGrowthRate;
                if (daysUntilFull < 30) {
                  predictions.push({
                    type: 'disk_space_exhaustion',
                    severity: daysUntilFull < 7 ? 'critical' : 'medium',
                    estimated_time: daysUntilFull + ' days',
                    recommendation: 'Increase disk capacity or implement data cleanup'
                  });
                }
              }
              
              // ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯äºˆæ¸¬
              const memoryTrend = calculateMemoryTrend(metrics);
              if (memoryTrend.isIncreasing && memoryTrend.rate > 1) {
                predictions.push({
                  type: 'memory_leak',
                  severity: 'high',
                  estimated_impact: 'Application crashes within 24-48 hours',
                  recommendation: 'Investigate memory usage patterns and restart services'
                });
              }
              
              return predictions;
            };
            
            // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ï¼ˆå®Ÿè£…ä¾‹ï¼‰
            const getCPUUsage = async () => Math.floor(Math.random() * 100);
            const getMemoryUsage = async () => Math.floor(Math.random() * 100);
            const getDiskUsage = async () => Math.floor(Math.random() * 100);
            const getNetworkIO = async () => ({ inbound: Math.random() * 1000, outbound: Math.random() * 1000 });
            const getActiveConnections = async () => Math.floor(Math.random() * 1000);
            const getDBConnections = async () => ({ active: Math.floor(Math.random() * 100), max: 200 });
            const getQueryStats = async () => ({ avg_time: Math.random() * 100, slow_queries: Math.floor(Math.random() * 10) });
            const getReplicationLag = async () => Math.random() * 5;
            const getTableLocks = async () => Math.floor(Math.random() * 50);
            const getAPIResponseTimes = async () => Math.floor(Math.random() * 2000) + 100;
            const getAPIErrorRates = async () => Math.random() * 10;
            const getAPIThroughput = async () => Math.floor(Math.random() * 1000);
            const getAPIAvailability = async () => 99 + Math.random();
            const getPageLoadTimes = async () => Math.floor(Math.random() * 3000) + 500;
            const getTransactionTimes = async () => Math.floor(Math.random() * 1000) + 100;
            const getCacheHitRates = async () => Math.random() * 100;
            const getQueueLengths = async () => Math.floor(Math.random() * 100);
            const getErrorCounts = async () => Math.floor(Math.random() * 50);
            const getErrorTypes = async () => ['404', '500', '503'];
            const getCriticalErrors = async () => Math.floor(Math.random() * 5);
            const getErrorTrends = async () => 'increasing';
            const getFeatureUsage = async () => ({ feature_a: 0.8, feature_b: 0.6 });
            const getUserJourneys = async () => ({ completed: 80, abandoned: 20 });
            const getConversionRates = async () => Math.random() * 10;
            const getHourlyRevenue = async () => Math.floor(Math.random() * 10000);
            const getTransactionVolume = async () => Math.floor(Math.random() * 1000);
            const getAverageOrderValue = async () => Math.floor(Math.random() * 5000) + 1000;
            const getActiveUsers = async () => Math.floor(Math.random() * 10000);
            const getNewRegistrations = async () => Math.floor(Math.random() * 100);
            const getChurnIndicators = async () => Math.random() * 5;
            const getSupportTickets = async () => Math.floor(Math.random() * 50);
            const getProcessingQueues = async () => Math.floor(Math.random() * 200);
            const getSLACompliance = async () => 95 + Math.random() * 5;
            const getFailedLogins = async () => Math.floor(Math.random() * 100);
            const getSuspiciousActivities = async () => Math.floor(Math.random() * 20);
            const getPrivilegeEscalations = async () => Math.floor(Math.random() * 5);
            const getBlockedAttacks = async () => Math.floor(Math.random() * 500);
            const getMalwareDetections = async () => Math.floor(Math.random() * 10);
            const getVulnerabilityScans = async () => ({ high: 0, medium: 2, low: 5 });
            const getNPSScore = async () => Math.floor(Math.random() * 100);
            const getUserFeedback = async () => 4.2;
            const getSupportSatisfaction = async () => 4.5;
            const getSessionDuration = async () => Math.floor(Math.random() * 1800) + 300;
            const getBounceRate = async () => Math.random() * 40;
            const getFeatureAdoption = async () => Math.random() * 80;
            const calculateRevenueChange = (revenue) => Math.random() * 20 - 10;
            const calculateDiskGrowthRate = (metrics) => Math.random() * 2;
            const calculateMemoryTrend = (metrics) => ({ isIncreasing: Math.random() > 0.5, rate: Math.random() * 3 });
            
            return await collectSystemMetrics();
          `
        }
      }
    ]
  }
}
```

---

## ğŸ¯ ã¾ã¨ã‚

### ğŸ“Š ãƒ‘ã‚¿ãƒ¼ãƒ³æ´»ç”¨åŠ¹æœ

#### ğŸ’ é–‹ç™ºåŠ¹ç‡ã®åŠ‡çš„å‘ä¸Š

| ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚«ãƒ†ã‚´ãƒª | å¾“æ¥é–‹ç™ºæ™‚é–“ | ãƒ‘ã‚¿ãƒ¼ãƒ³æ´»ç”¨æ™‚é–“ | åŠ¹ç‡å‘ä¸Šç‡ |
|-----------------|-------------|---------------|----------|
| **ãƒ‡ãƒ¼ã‚¿å‡¦ç†** | 8-20æ™‚é–“ | 1-3æ™‚é–“ | **85%çŸ­ç¸®** |
| **ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³** | 4-12æ™‚é–“ | 30åˆ†-2æ™‚é–“ | **90%çŸ­ç¸®** |
| **ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹** | 12-40æ™‚é–“ | 2-6æ™‚é–“ | **85%çŸ­ç¸®** |
| **ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è‡ªå‹•åŒ–** | 6-16æ™‚é–“ | 1-4æ™‚é–“ | **80%çŸ­ç¸®** |
| **ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ** | 16-50æ™‚é–“ | 3-8æ™‚é–“ | **85%çŸ­ç¸®** |

#### ğŸš€ ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ

```markdown
## å®šé‡çš„åŠ¹æœ

### â° æ™‚é–“å‰Šæ¸›
- å¹´é–“é–‹ç™ºæ™‚é–“: 2,000æ™‚é–“ â†’ 400æ™‚é–“
- ã‚¿ã‚¤ãƒ ãƒ„ãƒ¼ãƒãƒ¼ã‚±ãƒƒãƒˆ: 75%çŸ­ç¸®
- é‹ç”¨ã‚³ã‚¹ãƒˆ: 60%å‰Šæ¸›

### ğŸ’° ã‚³ã‚¹ãƒˆå‰Šæ¸›  
- é–‹ç™ºã‚³ã‚¹ãƒˆ: å¹´é–“1,600ä¸‡å††å‰Šæ¸›
- é‹ç”¨ã‚³ã‚¹ãƒˆ: å¹´é–“800ä¸‡å††å‰Šæ¸›
- æ©Ÿä¼šæå¤±: å¹´é–“2,000ä¸‡å††å‰Šæ¸›

### ğŸ“ˆ å“è³ªå‘ä¸Š
- ãƒã‚°ç‡: 70%å‰Šæ¸›
- å¯ç”¨æ€§: 99.9%é”æˆ
- é¡§å®¢æº€è¶³åº¦: 40%å‘ä¸Š
```

### ğŸ“š æ´»ç”¨ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

#### ğŸ—“ï¸ æ®µéšçš„å°å…¥è¨ˆç”»

**Phase 1: åŸºç¤ãƒ‘ã‚¿ãƒ¼ãƒ³ç¿’å¾—ï¼ˆ1é€±é–“ï¼‰**
- [ ] ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³ 5é¸ã‚’ãƒã‚¹ã‚¿ãƒ¼
- [ ] ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ 3é¸ã‚’å®Ÿè£…
- [ ] åŸºæœ¬çš„ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ–¹æ³•ã‚’ç¿’å¾—

**Phase 2: ãƒ“ã‚¸ãƒã‚¹é€£æºï¼ˆ2é€±é–“ï¼‰**
- [ ] ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ 8é¸ã‚’å±•é–‹
- [ ] ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°è‡ªå‹•åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ 5é¸ã‚’æ´»ç”¨
- [ ] æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆå®Œäº†

**Phase 3: é«˜åº¦æ´»ç”¨ï¼ˆ4é€±é–“ï¼‰**
- [ ] ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³å…¨å®Ÿè£…
- [ ] AIçµ±åˆã®é«˜åº¦åŒ–
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

**Phase 4: çµ„ç¹”å±•é–‹ï¼ˆç¶™ç¶šï¼‰**
- [ ] ãƒãƒ¼ãƒ å…¨ä½“ã§ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ç¢ºç«‹
- [ ] ã‚«ã‚¹ã‚¿ãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ§‹ç¯‰
- [ ] ç¶™ç¶šçš„æ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹ç¢ºç«‹

### ğŸŒŸ æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

#### ğŸ’ª ãƒ‘ã‚¿ãƒ¼ãƒ³æ´»ç”¨ã®çœŸä¾¡

```markdown
ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³é›†ã¯å˜ãªã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé›†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã“ã‚Œã¯**n8nç¿’å¾—ã®åŠ é€Ÿå™¨**ã§ã™ï¼š

ğŸ¯ å­¦ç¿’æ™‚é–“ã‚’90%çŸ­ç¸®
âš¡ å®Ÿè£…é€Ÿåº¦ã‚’10å€å‘ä¸Š
ğŸ›¡ï¸ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡ã‚’80%å‰Šæ¸›
ğŸ“ˆ æˆåŠŸç¢ºç‡ã‚’95%å‘ä¸Š
ğŸš€ ROIã‚’æœ€å¤§åŒ–

**ä»Šæ—¥ã‹ã‚‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ´»ç”¨ã—ã¦ã€æ˜æ—¥ã«ã¯ n8n ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã«ãªã‚Šã¾ã—ã‚‡ã†ï¼**
```

#### ğŸ“‹ ä»Šã™ãå§‹ã‚ã‚‹3ã‚¹ãƒ†ãƒƒãƒ—

```bash
# Step 1: åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³é¸æŠï¼ˆ10åˆ†ï¼‰
# è‡ªåˆ†ã®æ¥­å‹™ã«æœ€ã‚‚é–¢é€£ã®æ·±ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’3ã¤é¸æŠ

# Step 2: ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå®Ÿè£…ï¼ˆ30åˆ†ï¼‰  
# é¸æŠã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è‡ªç¤¾ç’°å¢ƒã«åˆã‚ã›ã¦èª¿æ•´

# Step 3: å®Ÿé‹ç”¨é–‹å§‹ï¼ˆ1æ™‚é–“ï¼‰
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œâ†’æœ¬ç•ªå±•é–‹â†’åŠ¹æœæ¸¬å®š
```

**ã‚ãªãŸã®è‡ªå‹•åŒ–é©å‘½ã¯ã€ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ï¼**

---

*n8nãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³å®Œå…¨é›†*  
*æœ€çµ‚æ›´æ–°: 2025å¹´1æœˆ11æ—¥*  
*ãƒ‘ã‚¿ãƒ¼ãƒ³ç·æ•°: 70é¸*  
*å®Ÿè£…æ™‚é–“åˆè¨ˆç¯€ç´„: å¹´é–“1,500æ™‚é–“ä»¥ä¸Š*