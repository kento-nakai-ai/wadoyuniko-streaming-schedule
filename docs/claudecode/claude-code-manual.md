# Claude Code 実践活用マニュアル

## 概要

このマニュアルでは、`cc`エイリアス（`claude --dangerously-skip-permissions`）を使った効率的な開発手法を解説します。

## 初期設定

### 1. エイリアス設定（完了済み）
```bash
# ~/.zshrcに以下が追加済み
alias cc='claude --dangerously-skip-permissions'
```

### 2. 権限設定のカスタマイズ
```json
// .claude/settings.local.json
{
  "permissions": {
    "allow": [
      "Bash(find:*)",
      "Bash(ls:*)",
      "Bash(mkdir:*)",
      "Bash(npm:*)",      // npm関連を許可
      "Bash(git:*)",      // git操作を許可
      "Bash(python:*)"    // Python実行を許可
    ],
    "deny": [
      "Bash(rm -rf:*)",   // 危険な削除コマンドを拒否
      "Bash(sudo:*)",     // sudo権限を拒否
      "Bash(curl:*)",     // 外部通信を制限
      "Bash(wget:*)"      // 外部ダウンロードを制限
    ]
  }
}
```

## 基本的な使い方

### 1. プロジェクト初期化
```bash
# 新規プロジェクトの作成
cc "Next.jsプロジェクトを作成して、TypeScript、Tailwind CSS、ESLintを設定してください"

# 既存プロジェクトの分析
cc "このプロジェクトの構造を分析して、CLAUDE.mdファイルを作成してください"
```

### 2. コーディング支援
```bash
# 機能実装
cc "ユーザー認証機能を実装してください。JWT、bcrypt、メール認証を含めてください"

# バグ修正
cc "npm testを実行して、失敗しているテストを修正してください"

# リファクタリング
cc "src/componentsディレクトリのコンポーネントをリファクタリングして、共通化できる部分を抽出してください"
```

### 3. ドキュメント作成
```bash
# API仕様書
cc "現在のAPIエンドポイントを分析して、OpenAPI 3.0形式のドキュメントを生成してください"

# README更新
cc "プロジェクトの最新状態に合わせてREADME.mdを更新してください"
```

## 実践的な活用例

### 1. フルスタック開発フロー
```bash
# バックエンド開発
cc "ユーザー管理のCRUD APIを作成してください。認証とバリデーションも含めてください"

# フロントエンド開発
cc "作成したAPIに対応するReactコンポーネントを作成してください。状態管理にはZustandを使用してください"

# テスト作成
cc "作成した機能に対してユニットテストとE2Eテストを作成してください"
```

### 2. デバッグワークフロー
```bash
# エラー調査
cc "npm run devを実行して、表示されるエラーを調査・修正してください"

# パフォーマンス改善
cc "Reactコンポーネントのレンダリングパフォーマンスを分析して、最適化してください"

# メモリリーク調査
cc "メモリ使用量が増加している原因を調査して、修正してください"
```

### 3. コードレビュー支援
```bash
# 変更内容の確認
cc "git diffを確認して、コードレビューのポイントをまとめてください"

# セキュリティチェック
cc "現在のコードベースをセキュリティの観点からレビューして、脆弱性を報告してください"

# ベストプラクティスチェック
cc "TypeScriptとReactのベストプラクティスに従っているか確認してください"
```

## 高度な活用テクニック

### 1. 継続的なコンテキスト管理
```bash
# セッション開始時
cc "プロジェクトの現在の状態を把握して、今日の作業計画を立ててください"

# 作業中断時
cc "現在の作業状態を要約して、次回の作業開始時に参照できるようにしてください"
```

### 2. 自動化スクリプト作成
```bash
# デプロイ自動化
cc "staging環境へのデプロイスクリプトを作成してください。テスト実行、ビルド、デプロイまでを含めてください"

# データ移行
cc "データベースマイグレーションスクリプトを作成して、ロールバック機能も実装してください"
```

### 3. AI駆動開発（AID）
```bash
# テスト駆動開発
cc "まずテストケースを作成してから、その実装を行ってください"

# ドキュメント駆動開発
cc "APIの仕様書を先に作成してから、その実装を行ってください"
```

## セキュリティと注意点

### 1. 権限管理のベストプラクティス
- 本番環境では`--dangerously-skip-permissions`を使用しない
- 定期的に`.claude/settings.local.json`の権限設定を見直す
- 機密情報を含むコマンドは必ずdenyリストに追加

### 2. データ保護
```bash
# 環境変数の使用
cc "APIキーは環境変数から読み込むように実装してください"

# .gitignoreの確認
cc ".gitignoreファイルを確認して、機密ファイルが含まれていないか確認してください"
```

### 3. コード品質の維持
```bash
# 定期的な品質チェック
cc "ESLintとPrettierを実行して、コード品質を確認してください"

# 依存関係の更新
cc "npm auditを実行して、セキュリティ脆弱性を確認・修正してください"
```

## チームでの活用

### 1. 共通設定の共有
```bash
# チーム用設定ファイル作成
cc ".claude/settings.json にチーム共通の設定を作成してください"

# ドキュメント整備
cc "チームメンバー向けのClaude Code利用ガイドを作成してください"
```

### 2. コラボレーションワークフロー
```bash
# PR作成支援
cc "現在の変更内容を確認して、PR説明文を作成してください"

# コードレビュー支援
cc "PR #123 の変更内容をレビューして、改善点を提案してください"
```

### 3. ナレッジ共有
```bash
# 実装パターンの文書化
cc "プロジェクトで使用している実装パターンを抽出して、ドキュメント化してください"

# トラブルシューティングガイド
cc "過去のエラーログを分析して、トラブルシューティングガイドを作成してください"
```

## トラブルシューティング

### よくある問題と解決方法

1. **権限エラーが発生する場合**
   ```bash
   # 設定ファイルの確認
   cc ".claude/settings.local.jsonの内容を確認して、必要な権限を追加してください"
   ```

2. **コンテキストが失われる場合**
   ```bash
   # CLAUDE.mdの活用
   cc "CLAUDE.mdファイルを読み込んで、プロジェクトのコンテキストを復元してください"
   ```

3. **大規模な変更を行う場合**
   ```bash
   # 段階的な実行
   cc "まず変更計画を立てて、ステップバイステップで実行してください"
   ```

## まとめ

`cc`コマンドを活用することで、開発効率を大幅に向上させることができます。重要なのは：

1. **適切な権限設定**：必要最小限の権限のみを許可
2. **明確な指示**：具体的で明確な指示を与える
3. **段階的な実行**：大きなタスクは小さく分割
4. **継続的な改善**：使用パターンを分析して設定を最適化

このマニュアルを参考に、自分のワークフローに合わせてカスタマイズしていってください。